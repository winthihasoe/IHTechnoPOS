import{c as _,r as t,d as y,j as r,H as B,L as o,b as R}from"./currencyStore-Dk9RVyyc.js";import{A as O,L as p,P as F,S as N,a as V}from"./AuthenticatedLayout-CblcNqH9.js";import{C as U,a as W}from"./card-Bc9L3Usa.js";import{P as G}from"./Payments-DSgOMdsa.js";import{R as H}from"./Refresh-Be3nBego.js";import{C as T}from"./CloudUpload-BAJzgGna.js";import{n as c}from"./numeral-NHlY-3dw.js";import $ from"./Summaries-QGu57kI4.js";import{SalesChart as J}from"./SalesChart-dJVMC2D-.js";import{OverViewCards as K}from"./OverViewCards-cE_WMTQ4.js";import{M as g}from"./MUIDatePicker-uF2qI3Qp.js";import{G as e}from"./Grid-6qcTmjc4.js";import{A as l}from"./Alert-CsOnCL1T.js";import{L as Q}from"./List-OrinuOpJ.js";import{L as n}from"./ListItem-BK8RisGy.js";import{L as d}from"./ListItemButton-DDnSs3En.js";import{L as a}from"./ListItemText--0XI93dL.js";import{D as h}from"./Divider-D4ysiqwk.js";import{B as X}from"./Box-j1BTqM2v.js";import{I as j}from"./IconButton-PbvyX_sG.js";import{c as Z}from"./createLucideIcon-BMpC51dL.js";import"./createSvgIcon-B7q9zImx.js";import"./clsx-B-dksMZM.js";import"./memoTheme-BxRvtGIq.js";import"./index-Rj29YxKv.js";import"./Receipt-DnWIM4Bg.js";import"./index-RHigu7j0.js";import"./index-NgBaJJmW.js";import"./infoshop-hkdJrh2a.js";import"./Toolbar-f3-_dlD0.js";import"./listItemIconClasses-vD-ryqxg.js";import"./ListContext-CTnR0k9S.js";import"./Collapse-CHgnjEwQ.js";import"./useTheme-CvovRv7W.js";import"./Portal-DeuEDNNi.js";import"./TransitionGroupContext-yQ7B3b2o.js";import"./index-DJHI8khq.js";import"./useForkRef-DgOCCfFR.js";import"./useTimeout--F2UA0HV.js";import"./CssBaseline-DBisayGl.js";import"./index-CsFzvdgQ.js";import"./emotion-react.browser.esm-BdOGWTdw.js";import"./extendSxProp-Co6nc6xJ.js";import"./AppBar-CxLpgr4B.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./Paper-Df0ljdBt.js";import"./Typography-DOI0NvTt.js";import"./Tooltip-DjVJzg5-.js";import"./index-DM5RHFVd.js";import"./useSlot-PFdYD2CN.js";import"./useControlled-DRAJCB75.js";import"./useId-9XzpHYrc.js";import"./Grow-D31e1sMI.js";import"./Popper-pZx5Iht2.js";import"./ownerDocument-DW-IO8s5.js";import"./useSlotProps-DuznN7Ax.js";import"./ButtonBase-CjVOrSoJ.js";import"./Drawer-Dk2A_cxp.js";import"./mergeSlotProps-D_PRovB-.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-HkKU3E4x.js";import"./Modal-D1QunwiJ.js";import"./utils-NikRBbYi.js";import"./Card-C4NAxgST.js";import"./TextField-DpXyhoD7.js";import"./useFormControl-Cowmrh0y.js";import"./isMuiElement-HmfyYHhb.js";import"./TableContainer-Bx1in-E2.js";import"./TableRow-BMfflATG.js";import"./TableCell-DMEjcBPA.js";import"./useThemeProps-Cgy5Iu59.js";import"./getThemeProps-DKKyYQML.js";import"./chart-B5SD2-ik.js";import"./with-selector-DyjQJW38.js";import"./with-selector-Bw9PUS5X.js";import"./select-DF-qibkA.js";import"./floating-ui.dom-CpMS8hwT.js";import"./tslib.es6-BUas5LQb.js";import"./chevron-down-C5MZ1frv.js";import"./currencyFormatter-Be2b0Ktm.js";import"./en-gb-BMmXCQZs.js";import"./useMobilePicker-BIozrTWd.js";import"./index-P4sNTowN.js";import"./DialogContent-Cz4a0t2H.js";import"./InputAdornment-DZOHCUsF.js";import"./index-JJ5bZ37u.js";import"./Button-aMjmD1gp.js";import"./CircularProgress-B97ut0O7.js";import"./DialogActions-BraO_KzF.js";import"./Chip-DT462TV2.js";import"./DatePicker--Uxs9Qj-.js";import"./Close-kFSrCAJM.js";import"./listItemButtonClasses-DXPtGUcW.js";import"./listItemTextClasses-DNpdtY9T.js";import"./dividerClasses-BJEnnqiu.js";const rr=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 12a9 3 0 0 0 5 2.69",key:"1ui2ym"}],["path",{d:"M21 9.3V5",key:"6k6cib"}],["path",{d:"M3 5v14a9 3 0 0 0 6.47 2.88",key:"i62tjy"}],["path",{d:"M12 12v4h4",key:"1bxaet"}],["path",{d:"M13 20a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L12 16",key:"1f4ei9"}]],er=Z("database-backup",rr);function Ge({data:s,logo:sr,version:k,store_name:tr}){const i=_().props.auth.user,S=_().props.modules,[x,I]=t.useState(y().format("YYYY-MM-DD")),[u,C]=t.useState(y().format("YYYY-MM-DD")),[D,b]=t.useState(0),[w,v]=t.useState(0),[L,A]=t.useState(0),[M,E]=t.useState(0),f=async()=>{try{const m=await R.post("/dashboard/summary",{start_date:x,end_date:u}),{cash_in:z,total_sales:q,expenses:P,inventory_purchase:Y}=m.data.summary;b(z),v(q),A(P),E(Y)}catch(m){console.error("Error fetching summary:",m)}};return t.useEffect(()=>{f()},[]),t.useEffect(()=>{f()},[x,u]),r.jsxs(O,{header:r.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[r.jsx(B,{title:"Dashboard"}),(i.user_role=="admin"||i.user_role=="super-admin")&&r.jsxs(e,{size:12,spacing:{xs:.5,sm:1},flexDirection:"row",container:!0,sx:{mb:2},children:[parseFloat(s.lowStock)!=0&&r.jsx(e,{size:{xs:12,sm:3},children:r.jsx(o,{href:"/products?status=alert&per_page="+s.lowStock,children:r.jsxs(l,{severity:"warning",children:[r.jsx("strong",{children:s.lowStock})," Alert Products"]})})}),parseFloat(s.outOfStock)!=0&&r.jsx(e,{size:{xs:12,sm:3},children:r.jsx(o,{href:"/products?status=out_of_stock&per_page="+s.outOfStock,children:r.jsxs(l,{severity:"error",children:[r.jsx("strong",{children:s.outOfStock})," Out of Stocks"]})})}),parseFloat(s.pending_cheque_count)!=0&&r.jsx(e,{size:{xs:12,sm:3},children:r.jsx(o,{href:"/cheques?status=pending&per_page="+s.pending_cheque_count,children:r.jsxs(l,{severity:"primary",children:[r.jsx("strong",{children:s.pending_cheque_count})," Pending Cheque/s"]})})}),parseFloat(s.cheque_alert_count)!=0&&r.jsx(e,{size:{xs:12,sm:3},children:r.jsx(o,{href:`/cheques?status=alert&per_page=${s.cheque_alert_count}`,children:r.jsxs(l,{severity:"error",children:[r.jsx("strong",{children:s.cheque_alert_count})," Alert Cheque/s"]})})})]}),(i.user_role=="admin"||i.user_role=="super-admin")&&r.jsx(K,{}),r.jsxs(e,{container:!0,size:{xs:12,sm:8,md:4},sx:{mt:"3rem",paddingBottom:4},spacing:2,children:[(i.user_role=="admin"||i.user_role=="super-admin")&&r.jsx(e,{size:{xs:12,sm:8,md:4},children:r.jsx(U,{className:"pt-0 w-full",children:r.jsxs(W,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:[r.jsxs(e,{container:!0,display:"flex",spacing:2,width:"100%",children:[r.jsx(e,{size:6,children:r.jsx(g,{name:"start_date",label:"Start Date",value:x,onChange:I})}),r.jsx(e,{size:6,children:r.jsx(g,{name:"end_date",label:"End Date",value:u,onChange:C})})]}),r.jsxs(Q,{children:[r.jsx(o,{href:"/reports/sales",children:r.jsx(n,{secondaryAction:c(w).format("0,0.00"),children:r.jsxs(d,{children:[r.jsx(p,{children:r.jsx(F,{})}),r.jsx(a,{primary:"Sales"})]})})}),r.jsx(h,{}),r.jsx(o,{href:"/reports/dailycash",children:r.jsx(n,{secondaryAction:c(D).format("0,0.00"),children:r.jsxs(d,{children:[r.jsx(p,{children:r.jsx(G,{})}),r.jsx(a,{primary:"Cash"})]})})}),S?.includes("Inventory")&&r.jsxs(t.Fragment,{children:[r.jsx(h,{}),r.jsx(o,{href:"#",children:r.jsx(n,{secondaryAction:c(M).format("0,0.00"),children:r.jsxs(d,{children:[r.jsx(p,{children:r.jsx(N,{})}),r.jsx(a,{primary:"Inventory Purchase"})]})})})]}),r.jsx(h,{}),r.jsx(o,{href:"/expenses",children:r.jsx(n,{secondaryAction:c(L).format("0,0.00"),children:r.jsxs(d,{children:[r.jsx(p,{children:r.jsx(V,{})}),r.jsx(a,{primary:"Expenses"})]})})}),r.jsx(h,{}),r.jsx(o,{href:"/reports/summary-report",children:r.jsx(n,{children:r.jsx(a,{sx:{textAlign:"center",color:"#1976d2",textDecoration:"underline"},primary:"VIEW SUMMARY"})})})]})]})})}),r.jsx(e,{size:{xs:12,sm:8,md:8},children:r.jsx(J,{})}),(i.user_role=="admin"||i.user_role=="super-admin")&&r.jsx($,{})]}),r.jsx(X,{sx:{justifyContent:"center",alignItems:"center",position:"fixed",backgroundColor:"#c9c9c9",bottom:"2px",right:"6px",padding:"10px",paddingRight:2},children:r.jsxs(e,{container:!0,spacing:1,alignItems:"center",children:[r.jsx(e,{children:r.jsx("a",{href:"/clear-cache",title:"Refresh cache",children:r.jsx(j,{children:r.jsx(H,{})})})}),r.jsx(e,{children:r.jsx("a",{href:"/backup-now",title:"Backup now",target:"_blank",children:r.jsx(j,{children:r.jsx(er,{})})})}),r.jsx(e,{children:r.jsx(j,{onClick:()=>{prompt("Enter password:")==="infomax2025"?window.location.href="/update":alert("Wrong password!")},children:r.jsx(T,{})})}),r.jsxs(e,{children:["VERSION ",k]})]})})]})}export{Ge as default};
