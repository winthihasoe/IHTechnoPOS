import{j as e,r as v}from"./currencyStore-Dk9RVyyc.js";import{D as B}from"./Delete-DDMcR4JX.js";import{c as w}from"./createSvgIcon-B7q9zImx.js";import I from"./LeftSideBar-BjoW1xet.js";import{B as m}from"./Box-j1BTqM2v.js";import{D}from"./Drawer-Dk2A_cxp.js";import{T as g}from"./Typography-DOI0NvTt.js";import{D as z}from"./Divider-D4ysiqwk.js";import{T as x}from"./TextField-DpXyhoD7.js";import{I as j}from"./IconButton-PbvyX_sG.js";import"./clsx-B-dksMZM.js";import"./memoTheme-BxRvtGIq.js";import"./index-Rj29YxKv.js";import"./Button-aMjmD1gp.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./useId-9XzpHYrc.js";import"./ButtonBase-CjVOrSoJ.js";import"./useTimeout--F2UA0HV.js";import"./TransitionGroupContext-yQ7B3b2o.js";import"./emotion-react.browser.esm-BdOGWTdw.js";import"./useForkRef-DgOCCfFR.js";import"./CircularProgress-B97ut0O7.js";import"./index-DM5RHFVd.js";import"./useTheme-CvovRv7W.js";import"./useSlot-PFdYD2CN.js";import"./mergeSlotProps-D_PRovB-.js";import"./Portal-DeuEDNNi.js";import"./index-DJHI8khq.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./Modal-D1QunwiJ.js";import"./Paper-Df0ljdBt.js";import"./extendSxProp-Co6nc6xJ.js";import"./index-CsFzvdgQ.js";import"./dividerClasses-BJEnnqiu.js";import"./useFormControl-Cowmrh0y.js";import"./useSlotProps-DuznN7Ax.js";import"./Grow-D31e1sMI.js";import"./List-OrinuOpJ.js";import"./ListContext-CTnR0k9S.js";import"./useControlled-DRAJCB75.js";import"./isMuiElement-HmfyYHhb.js";const P=w(e.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),L=w(e.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),R="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let T=(d=21)=>{let p="",r=crypto.getRandomValues(new Uint8Array(d|=0));for(;d--;)p+=R[r[d]&63];return p};const wt=()=>{const[d,p]=v.useState([]),[r,c]=v.useState(null),S=t=>{const s={id:T(),name:t,attributes:t==="core/paragraph"?{content:"New paragraph block."}:t==="core/image"?{url:"https://via.placeholder.com/150",alt:"Placeholder image"}:{text:"New Button",url:"#"}};if(r&&r.name==="core/container"){const l=d.map(a=>a.id===r.id?{...a,children:[...a.children||[],s]}:a);p(l),c({...r,children:[...r.children||[],s]})}else p([...d,s])},h=(t,s)=>{if(r?.parent&&r?.parent.children){const l=r.parent.children.map(i=>i.id===t?{...i,attributes:{...i.attributes,...s}}:i),a={...r.parent,children:l},o=d.map(i=>i.id===a.id?a:i);p(o);const n=o.find(i=>i.id===t);c(n)}else if(r){const l=d.map(o=>o.id===t?{...o,attributes:{...o.attributes,...s}}:o);p(l);const a=l.find(o=>o.id===t);c(a)}},y=t=>{const s={};return t.split(";").forEach(l=>{const[a,o]=l.split(":").map(n=>n.trim());if(a&&o){const n=a.replace(/-([a-z])/g,i=>i[1].toUpperCase());s[n]=o}}),s},f=(t,s)=>{if(!t)p(s);else{const l=d.map(a=>a.id===t.id?{...a,children:s}:a);p(l),r?.id===t.id&&c({...t,children:s})}},C=(t,s=null)=>{let l={};t?.attributes?.customCss&&(l=y(t.attributes.customCss));const a=s?.children||d,o=a.findIndex(n=>n.id===t.id);return e.jsxs(m,{sx:{border:r?.id===t.id?"2px solid #4caf50":"none",borderRadius:"4px",padding:"5px",marginBottom:"5px",cursor:"pointer",backgroundColor:"#fff",position:"relative"},onClick:n=>{n.stopPropagation(),c({...t,parent:s})},children:[t.name==="core/paragraph"&&e.jsx(g,{sx:l,children:t.attributes.content}),t.name==="core/image"&&e.jsx("img",{src:t.attributes.url,alt:t.attributes.alt,style:{maxWidth:"100%",height:"auto",...l}}),t.name==="core/container"&&e.jsx(m,{sx:{display:"flex",flexDirection:t.attributes.direction||"row",justifyContent:t.attributes.justifyContent||"flex-start",alignItems:t.attributes.alignItems||"stretch",gap:"8px",...l},children:t.children?.map(n=>C(n,t))}),r?.id===t.id&&e.jsxs(m,{sx:{position:"absolute",top:-15,right:8,display:"flex",flexDirection:"row",gap:.5,zIndex:10,backgroundColor:"white",borderRadius:"10px"},children:[e.jsx(j,{size:"large",color:"primary",onClick:n=>{if(n.stopPropagation(),o>0){const i=[...a],u=i[o-1];i[o-1]=i[o],i[o]=u,f(s,i)}},children:e.jsx(L,{fontSize:"small"})}),e.jsx(j,{size:"large",color:"primary",onClick:n=>{if(n.stopPropagation(),o<a.length-1){const i=[...a],u=i[o+1];i[o+1]=i[o],i[o]=u,f(s,i)}},children:e.jsx(P,{fontSize:"small"})}),e.jsx(j,{size:"large",color:"error",onClick:n=>{n.stopPropagation();const i=a.filter(u=>u.id!==t.id);f(s,i)},children:e.jsx(B,{fontSize:"small"})})]})]},t.id)};return e.jsxs(m,{display:"flex",height:"100vh",children:[e.jsx(I,{addBlock:S}),e.jsx(m,{flexGrow:1,p:3,sx:{backgroundColor:"#f5f5f5",overflowY:"auto"},children:e.jsx(m,{children:d.map(t=>C(t))})}),e.jsx(D,{variant:"permanent",anchor:"right",sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}},children:e.jsxs(m,{p:2,children:[e.jsx(g,{variant:"h6",gutterBottom:!0,children:"Block Options"}),e.jsx(z,{}),r&&e.jsxs(e.Fragment,{children:[r.name==="core/paragraph"&&e.jsx(x,{fullWidth:!0,label:"Content",value:r.attributes.content,onChange:t=>{h(r.id,{content:t.target.value})},sx:{mt:2}}),r.name==="core/image"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{fullWidth:!0,label:"Image URL",value:r.attributes.url,onChange:t=>{h(r.id,{url:t.target.value})},sx:{mt:2}}),e.jsx(x,{fullWidth:!0,label:"Alt Text",value:r.attributes.alt,onChange:t=>{h(r.id,{alt:t.target.value})},sx:{mt:2}})]}),e.jsx(g,{variant:"subtitle1",children:"Custom CSS"}),e.jsx(x,{multiline:!0,minRows:5,placeholder:"Enter custom CSS here...",variant:"outlined",fullWidth:!0,style:{marginTop:"8px"},value:r?.attributes.customCss||"",onChange:t=>{h(r.id,{customCss:t.target.value})}})]})]})})]})};export{wt as default};
