import{m as Xt}from"./currencyStore-Dk9RVyyc.js";var ht={exports:{}},Gt=ht.exports,Rt;function Yt(){return Rt||(Rt=1,(function(t,e){(function(n,o){t.exports=o(Xt())})(typeof self<"u"?self:Gt,function(n){return(function(){var o={155:function(p){p.exports=n}},r={};function i(p){var y=r[p];if(y!==void 0)return y.exports;var x=r[p]={exports:{}};return o[p](x,x.exports,i),x.exports}i.d=function(p,y){for(var x in y)i.o(y,x)&&!i.o(p,x)&&Object.defineProperty(p,x,{enumerable:!0,get:y[x]})},i.o=function(p,y){return Object.prototype.hasOwnProperty.call(p,y)},i.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var s={};i.r(s),i.d(s,{useReactToPrint:function(){return C}});var a=i(155);function u({level:p="error",messages:y,suppressErrors:x=!1}){x||(p==="error"?console.error(y):p==="warning"?console.warn(y):console.debug(y))}function c(p,y){if(y||!p){const x=document.getElementById("printWindow");x&&document.body.removeChild(x)}}function l(p){return p instanceof Error?p:new Error("Unknown Error")}function m(p,y){const{documentTitle:x,onAfterPrint:F,onPrintError:B,preserveAfterPrint:_,print:D,suppressErrors:d}=y;setTimeout(()=>{var f,g;if(p.contentWindow){let S=function(){F?.(),c(_)};if(p.contentWindow.focus(),D)D(p).then(S).catch(h=>{B?B("print",l(h)):u({messages:["An error was thrown by the specified `print` function"],suppressErrors:d})});else{if(p.contentWindow.print){const h=(g=(f=p.contentDocument)===null||f===void 0?void 0:f.title)!==null&&g!==void 0?g:"",w=p.ownerDocument.title;x&&(p.ownerDocument.title=x,p.contentDocument&&(p.contentDocument.title=x)),p.contentWindow.print(),x&&(p.ownerDocument.title=w,p.contentDocument&&(p.contentDocument.title=h))}else u({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:d});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(h=>{var w,$;return(($=(w=navigator.userAgent)!==null&&w!==void 0?w:navigator.vendor)!==null&&$!==void 0?$:"opera"in window&&window.opera).match(h)})?setTimeout(S,500):S()}}else u({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:d})},500)}function k(p){const y=[],x=document.createTreeWalker(p,NodeFilter.SHOW_ELEMENT,null);let F=x.nextNode();for(;F;)y.push(F),F=x.nextNode();return y}function W(p,y,x){const F=k(p),B=k(y);if(F.length===B.length)for(let _=0;_<F.length;_++){const D=F[_],d=B[_],f=D.shadowRoot;if(f!==null){const g=d.attachShadow({mode:f.mode});g.innerHTML=f.innerHTML,W(f,g,x)}}else u({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",p,y],suppressErrors:x})}const A=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function T(p,y,x,F){var B,_,D,d,f;const{contentNode:g,clonedContentNode:S,clonedImgNodes:h,clonedVideoNodes:w,numResourcesToLoad:$,originalCanvasNodes:v}=x,{bodyClass:N,fonts:L,ignoreGlobalStyles:U,pageStyle:j,nonce:M,suppressErrors:R,copyShadowRoots:q}=F;p.onload=null;const E=(B=p.contentDocument)!==null&&B!==void 0?B:(_=p.contentWindow)===null||_===void 0?void 0:_.document;if(E){const H=E.body.appendChild(S);q&&W(g,H,!!R),L&&(!((D=p.contentDocument)===null||D===void 0)&&D.fonts&&(!((d=p.contentWindow)===null||d===void 0)&&d.FontFace)?L.forEach(I=>{const P=new FontFace(I.family,I.source,{weight:I.weight,style:I.style});p.contentDocument.fonts.add(P),P.loaded.then(()=>{y(P)}).catch(G=>{y(P,["Failed loading the font:",P,"Load error:",l(G)])})}):(L.forEach(I=>{y(I)}),u({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:R})));const Y=j??A,K=E.createElement("style");M&&(K.setAttribute("nonce",M),E.head.setAttribute("nonce",M)),K.appendChild(E.createTextNode(Y)),E.head.appendChild(K),N&&E.body.classList.add(...N.split(" "));const z=E.querySelectorAll("canvas");for(let I=0;I<v.length;++I){const P=v[I],G=z[I];if(G===void 0){u({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",P],suppressErrors:R});continue}const O=G.getContext("2d");O&&O.drawImage(P,0,0)}for(let I=0;I<h.length;I++){const P=h[I],G=P.getAttribute("src");if(G){const O=new Image;O.onload=()=>{y(P)},O.onerror=(X,J,ot,Z,tt)=>{y(P,["Error loading <img>",P,"Error",tt])},O.src=G}else y(P,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',P])}for(let I=0;I<w.length;I++){const P=w[I];P.preload="auto";const G=P.getAttribute("poster");if(G){const O=new Image;O.onload=()=>{y(P)},O.onerror=(X,J,ot,Z,tt)=>{y(P,["Error loading video poster",G,"for video",P,"Error:",tt])},O.src=G}else P.readyState>=2?y(P):P.src?(P.onloadeddata=()=>{y(P)},P.onerror=(O,X,J,ot,Z)=>{y(P,["Error loading video",P,"Error",Z])},P.onstalled=()=>{y(P,["Loading video stalled, skipping",P])}):y(P,["Error loading video, `src` is empty",P])}const Q="select",st=g.querySelectorAll(Q),rt=E.querySelectorAll(Q);for(let I=0;I<st.length;I++)rt[I].value=st[I].value;if(!U){const I=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let P=0,G=I.length;P<G;++P){const O=I[P];if(O.tagName.toLowerCase()==="style"){const X=E.createElement(O.tagName),J=O.sheet;if(J){let ot="";try{const Z=J.cssRules.length;for(let tt=0;tt<Z;++tt)typeof J.cssRules[tt].cssText=="string"&&(ot+=`${J.cssRules[tt].cssText}\r
`)}catch(Z){u({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",O,`Original error: ${l(Z).message}`],level:"warning"})}X.setAttribute("id",`react-to-print-${P}`),M&&X.setAttribute("nonce",M),X.appendChild(E.createTextNode(ot)),E.head.appendChild(X)}}else if(O.getAttribute("href"))if(O.hasAttribute("disabled"))u({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",O],level:"warning"}),y(O);else{const X=E.createElement(O.tagName);for(let J=0,ot=O.attributes.length;J<ot;++J){const Z=O.attributes[J];Z&&X.setAttribute(Z.nodeName,(f=Z.nodeValue)!==null&&f!==void 0?f:"")}X.onload=()=>{y(X)},X.onerror=(J,ot,Z,tt,Vt)=>{y(X,["Failed to load",X,"Error:",Vt])},M&&X.setAttribute("nonce",M),E.head.appendChild(X)}else u({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",O],level:"warning"}),y(O)}}}$===0&&m(p,F)}function C({bodyClass:p,contentRef:y,copyShadowRoots:x,documentTitle:F,fonts:B,ignoreGlobalStyles:_,nonce:D,onAfterPrint:d,onBeforePrint:f,onPrintError:g,pageStyle:S,preserveAfterPrint:h,print:w,suppressErrors:$}){return(0,a.useCallback)(v=>{function N(){const L={bodyClass:p,contentRef:y,copyShadowRoots:x,documentTitle:F,fonts:B,ignoreGlobalStyles:_,nonce:D,onAfterPrint:d,onPrintError:g,pageStyle:S,preserveAfterPrint:h,print:w,suppressErrors:$},U=(function(){const R=document.createElement("iframe");return R.width=`${document.documentElement.clientWidth}px`,R.height=`${document.documentElement.clientHeight}px`,R.style.position="absolute",R.style.top=`-${document.documentElement.clientHeight+100}px`,R.style.left=`-${document.documentElement.clientWidth+100}px`,R.id="printWindow",R.srcdoc="<!DOCTYPE html>",R})(),j=(function(R,q){const{contentRef:E,fonts:H,ignoreGlobalStyles:Y,suppressErrors:K}=q,z=(function({contentRef:G,optionalContent:O,suppressErrors:X}){return O&&typeof O=="function"?(G&&u({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),O()):G?G.current:void u({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:X})})({contentRef:E,optionalContent:R,suppressErrors:K});if(!z)return;const Q=z.cloneNode(!0),st=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),rt=Q.querySelectorAll("img"),I=Q.querySelectorAll("video"),P=H?H.length:0;return{contentNode:z,clonedContentNode:Q,clonedImgNodes:rt,clonedVideoNodes:I,numResourcesToLoad:(Y?0:st.length)+rt.length+I.length+P,originalCanvasNodes:z.querySelectorAll("canvas")}})(v,L);if(!j)return void u({messages:["There is nothing to print"],suppressErrors:$});const M=(function(R,q,E){const{suppressErrors:H}=R,Y=[],K=[];return function(z,Q){Y.includes(z)?u({level:"debug",messages:["Tried to mark a resource that has already been handled",z],suppressErrors:H}):(Q?(u({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...Q],suppressErrors:H}),K.push(z)):Y.push(z),Y.length+K.length===q&&m(E,R))}})(L,j.numResourcesToLoad,U);(function(R,q,E,H){R.onload=()=>{T(R,q,E,H)},document.body.appendChild(R)})(U,M,j,L)}c(h,!0),f?f().then(()=>{N()}).catch(L=>{g?.("onBeforePrint",l(L))}):N()},[p,y,x,F,B,_,D,d,f,g,S,h,w,$])}return s})()})})(ht)),ht.exports}var wn=Yt(),b={image:new Map,background:new Map,resource:new Map,defaultStyle:new Map,baseStyle:new Map,computedStyle:new WeakMap,font:new Set,session:{styleMap:new Map,styleCache:new WeakMap,nodeMap:new Map}};function Kt(t="soft"){switch(t){case"auto":{b.session.styleMap=new Map,b.session.nodeMap=new Map;return}case"soft":{b.session.styleMap=new Map,b.session.nodeMap=new Map,b.session.styleCache=new WeakMap;return}case"full":return;case"disabled":{b.session.styleMap=new Map,b.session.nodeMap=new Map,b.session.styleCache=new WeakMap,b.computedStyle=new WeakMap,b.baseStyle=new Map,b.defaultStyle=new Map,b.image=new Map,b.background=new Map,b.resource=new Map,b.font=new Set;return}default:{b.session.styleMap=new Map,b.session.nodeMap=new Map,b.session.styleCache=new WeakMap;return}}}function At(t){const e=t.match(/url\((['"]?)(.*?)(\1)\)/);if(!e)return null;const n=e[2].trim();return n.startsWith("#")?null:n}function Jt(t){if(!t||t==="none")return"";let e=t.replace(/translate[XY]?\([^)]*\)/g,"");return e=e.replace(/matrix\(([^)]+)\)/g,(n,o)=>{const r=o.split(",").map(i=>i.trim());return r.length!==6?`matrix(${o})`:(r[4]="0",r[5]="0",`matrix(${r.join(", ")})`)}),e=e.replace(/matrix3d\(([^)]+)\)/g,(n,o)=>{const r=o.split(",").map(i=>i.trim());return r.length!==16?`matrix3d(${o})`:(r[12]="0",r[13]="0",`matrix3d(${r.join(", ")})`)}),e.trim().replace(/\s{2,}/g," ")}function _t(t){if(/%[0-9A-Fa-f]{2}/.test(t))return t;try{return encodeURI(t)}catch{return t}}function Zt(t="[snapDOM]",{ttlMs:e=5*6e4,maxEntries:n=12}={}){const o=new Map;let r=0;function i(s,a,u){if(r>=n)return;const c=Date.now();(o.get(a)||0)>c||(o.set(a,c+e),r++,s==="warn"&&console&&console.warn?console.warn(`${t} ${u}`):console&&console.error&&console.error(`${t} ${u}`))}return{warnOnce(s,a){i("warn",s,a)},errorOnce(s,a){i("error",s,a)},reset(){o.clear(),r=0}}}var Tt=Zt("[snapDOM]",{ttlMs:3*6e4,maxEntries:10}),wt=new Map,dt=new Map;function Qt(t){return/^data:|^blob:|^about:blank$/.test(t)}function te(t,e){if(!e||Qt(t))return!1;try{const n=typeof location<"u"&&location.href?location.href:"http://localhost/",o=new URL(t,n);return typeof location<"u"?o.origin!==location.origin:!0}catch{return!!e}}function ee(t,e){if(!e)return t;if(e.includes("{url}"))return e.replace("{url}",encodeURIComponent(t));const n=e.endsWith("?")?"":e.includes("?")?"&":"?";return`${e}${n}url=${encodeURIComponent(t)}`}function ne(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=()=>e(String(o.result||"")),o.onerror=()=>n(new Error("read_failed")),o.readAsDataURL(t)})}function oe(t,e){return[e.as||"blob",e.timeout??3e3,e.useProxy||"",e.errorTTL??8e3,t].join("|")}async function nt(t,e={}){const n=e.as??"blob",o=e.timeout??3e3,r=e.useProxy||"",i=e.errorTTL??8e3,s=e.headers||{},a=!!e.silent,u=oe(t,{as:n,timeout:o,useProxy:r,errorTTL:i}),c=dt.get(u);if(c&&c.until>Date.now())return{...c.result,fromCache:!0};c&&dt.delete(u);const l=wt.get(u);if(l)return l;const m=te(t,r)?ee(t,r):t;let k=e.credentials;if(!k)try{const C=typeof location<"u"&&location.href?location.href:"http://localhost/",p=new URL(t,C);k=typeof location<"u"&&p.origin===location.origin?"include":"omit"}catch{k="omit"}const W=new AbortController,A=setTimeout(()=>W.abort("timeout"),o),T=(async()=>{try{const C=await fetch(m,{signal:W.signal,credentials:k,headers:s});if(!C.ok){const x={ok:!1,data:null,status:C.status,url:m,fromCache:!1,reason:"http_error"};if(dt.set(u,{until:Date.now()+i,result:x}),!a){const F=`${C.status} ${C.statusText||""}`.trim();Tt.warnOnce(`http:${C.status}:${n}:${new URL(t,location?.href??"http://localhost/").origin}`,`HTTP error ${F} while fetching ${n} ${t}`)}return e.onError&&e.onError(x),x}if(n==="text")return{ok:!0,data:await C.text(),status:C.status,url:m,fromCache:!1};const p=await C.blob(),y=p.type||C.headers.get("content-type")||"";return n==="dataURL"?{ok:!0,data:await ne(p),status:C.status,url:m,fromCache:!1,mime:y}:{ok:!0,data:p,status:C.status,url:m,fromCache:!1,mime:y}}catch(C){const p=C&&typeof C=="object"&&"name"in C&&C.name==="AbortError"?String(C.message||"").includes("timeout")?"timeout":"abort":"network",y={ok:!1,data:null,status:0,url:m,fromCache:!1,reason:p};if(dt.set(u,{until:Date.now()+i,result:y}),!a){const x=`${p}:${n}:${new URL(t,location?.href??"http://localhost/").origin}`,F=p==="timeout"?`Timeout after ${o}ms. Consider increasing timeout or using a proxy for ${t}`:p==="abort"?`Request aborted while fetching ${n} ${t}`:`Network/CORS issue while fetching ${n} ${t}. A proxy may be required`;Tt.errorOnce(x,F)}return e.onError&&e.onError(y),y}finally{clearTimeout(A),wt.delete(u)}})();return wt.set(u,T),T}function $t(t,e){if(!e||!t.width||!t.height)return t;const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const o=n.getContext("2d");return o.fillStyle=e,o.fillRect(0,0,n.width,n.height),o.drawImage(t,0,0),n}async function Ot(t,e={}){if(/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(t)||t.trim()==="none")return t;const o=At(t);if(!o)return t;const r=_t(o);if(b.background.has(r)){const i=b.background.get(r);return i?`url("${i}")`:"none"}try{const i=await nt(r,{as:"dataURL",useProxy:e.useProxy});return i.ok?(b.background.set(r,i.data),`url("${i.data}")`):(b.background.set(r,null),"none")}catch{return b.background.set(r,null),"none"}}var re=new Set(["meta","script","noscript","title","link","template"]),Mt=new Set(["meta","link","style","title","noscript","script","template","g","defs","use","marker","mask","clipPath","pattern","path","polygon","polyline","line","circle","ellipse","rect","filter","lineargradient","radialgradient","stop"]);function se(t){if(t=String(t).toLowerCase(),Mt.has(t)){const i={};return b.defaultStyle.set(t,i),i}if(b.defaultStyle.has(t))return b.defaultStyle.get(t);let e=document.getElementById("snapdom-sandbox");e||(e=document.createElement("div"),e.id="snapdom-sandbox",e.setAttribute("data-snapdom-sandbox","true"),e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",document.body.appendChild(e));const n=document.createElement(t);n.style.all="initial",e.appendChild(n);const o=getComputedStyle(n),r={};for(let i of o){if(Ut(i))continue;const s=o.getPropertyValue(i);r[i]=s}return e.removeChild(n),b.defaultStyle.set(t,r),r}var ae=/(?:^|-)(animation|transition)(?:-|$)/i,ie=/^(--|view-timeline|scroll-timeline|animation-trigger|offset-|position-try|app-region|interactivity|overlay|view-transition|-webkit-locale|-webkit-user-(?:drag|modify)|-webkit-tap-highlight-color|-webkit-text-security)$/i,ce=new Set(["cursor","pointer-events","touch-action","user-select","print-color-adjust","speak","reading-flow","reading-order","anchor-name","anchor-scope","container-name","container-type","timeline-scope"]);function Ut(t){const e=String(t).toLowerCase();return!!(ce.has(e)||ie.test(e)||ae.test(e))}function xt(t,e){if(e=String(e||"").toLowerCase(),Mt.has(e))return"";const n=[],o=se(e);for(let[r,i]of Object.entries(t)){if(Ut(r))continue;const s=o[r];i&&i!==s&&n.push(`${r}:${i}`)}return n.sort(),n.join(";")}function le(t){const e=new Set;return t.nodeType!==Node.ELEMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(t.tagName&&e.add(t.tagName.toLowerCase()),typeof t.querySelectorAll=="function"&&t.querySelectorAll("*").forEach(n=>e.add(n.tagName.toLowerCase())),Array.from(e))}function ue(t){const e=new Map;for(let o of t){const r=b.defaultStyle.get(o);if(!r)continue;const i=Object.entries(r).map(([s,a])=>`${s}:${a};`).sort().join("");i&&(e.has(i)||e.set(i,[]),e.get(i).push(o))}let n="";for(let[o,r]of e.entries())n+=`${r.join(",")} { ${o} }
`;return n}function de(t){const e=Array.from(new Set(t.values())).filter(Boolean).sort(),n=new Map;let o=1;for(const r of e)n.set(r,`c${o++}`);return n}function Bt(t,e=null){if(!(t instanceof Element))return window.getComputedStyle(t,e);let n=b.computedStyle.get(t);if(n||(n=new Map,b.computedStyle.set(t,n)),!n.has(e)){const o=window.getComputedStyle(t,e);n.set(e,o)}return n.get(e)}function fe(t){let e=t.replace(/^['"]|['"]$/g,"");if(e.startsWith("\\"))try{return String.fromCharCode(parseInt(e.replace("\\",""),16))}catch{return e}return e}function Lt(t){const e={};for(let n of t)e[n]=t.getPropertyValue(n);return e}function Dt(t){const e=[];let n=0,o=0;for(let r=0;r<t.length;r++){const i=t[r];i==="("&&n++,i===")"&&n--,i===","&&n===0&&(e.push(t.slice(o,r).trim()),o=r+1)}return e.push(t.slice(o).trim()),e}function at(t,{fast:e=!1}={}){if(e)return t();"requestIdleCallback"in window?requestIdleCallback(t,{timeout:50}):setTimeout(t,1)}function qt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}var Nt=new WeakMap,vt=new Map,Ct=0;function lt(){Ct++}var Pt=!1;function he(t=document.documentElement){if(!Pt){Pt=!0;try{new MutationObserver(()=>lt()).observe(t,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{new MutationObserver(()=>lt()).observe(document.head,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{const e=document.fonts;e&&(e.addEventListener?.("loadingdone",lt),e.ready?.then(()=>lt()).catch(()=>{}))}catch{}}}function me(t){const e={},n=t.getPropertyValue("visibility");for(let o=0;o<t.length;o++){const r=t[o];let i=t.getPropertyValue(r);(r==="background-image"||r==="content")&&i.includes("url(")&&!i.includes("data:")&&(i="none"),e[r]=i}return n==="hidden"&&(e.opacity="0"),e}var Ft=new WeakMap;function pe(t){let e=Ft.get(t);return e||(e=Object.entries(t).sort((o,r)=>o[0]<r[0]?-1:o[0]>r[0]?1:0).map(([o,r])=>`${o}:${r}`).join(";"),Ft.set(t,e),e)}function ge(t,e=null){const n=Nt.get(t);if(n&&n.epoch===Ct)return n.snapshot;const o=e||getComputedStyle(t),r=me(o);return Nt.set(t,{epoch:Ct,snapshot:r}),r}function ye(t,e){return t&&t.session&&t.persist?t:t&&(t.styleMap||t.styleCache||t.nodeMap)?{session:t,persist:{snapshotKeyCache:vt,defaultStyle:b.defaultStyle,baseStyle:b.baseStyle,image:b.image,resource:b.resource,background:b.background,font:b.font},options:e||{}}:{session:b.session,persist:{snapshotKeyCache:vt,defaultStyle:b.defaultStyle,baseStyle:b.baseStyle,image:b.image,resource:b.resource,background:b.background,font:b.font},options:t||e||{}}}async function it(t,e,n,o){if(t.tagName==="STYLE")return;const r=ye(n,o),i=r.options&&r.options.cache||"auto";if(i!=="disabled"&&he(document.documentElement),i==="disabled"&&!r.session.__bumpedForDisabled&&(lt(),vt.clear(),r.session.__bumpedForDisabled=!0),Mt.has(t.tagName?.toLowerCase())){const k=t.getAttribute?.("style");k&&e.setAttribute("style",k)}const{session:s,persist:a}=r;s.styleCache.has(t)||s.styleCache.set(t,getComputedStyle(t));const u=s.styleCache.get(t),c=ge(t,u),l=pe(c);let m=a.snapshotKeyCache.get(l);if(!m){const k=t.tagName?.toLowerCase()||"div";m=xt(c,k),a.snapshotKeyCache.set(l,m)}s.styleMap.set(e,m)}function bt(t,e,n){return Promise.all(t.map(o=>new Promise(r=>{function i(){at(s=>{(s&&typeof s.timeRemaining=="function"?s.timeRemaining()>0:!0)?e(o,r):i()},{fast:n})}i()})))}function we(t){return t=t.trim(),!t||/\:not\(\s*\[data-sd-slotted\]\s*\)\s*$/.test(t)?t:`${t}:not([data-sd-slotted])`}function be(t,e,n=!0){return t.split(",").map(o=>o.trim()).filter(Boolean).map(o=>{if(o.startsWith(":where(")||o.startsWith("@"))return o;const r=n?we(o):o;return`:where(${e} ${r})`}).join(", ")}function Se(t,e){return t?(t=t.replace(/:host\(([^)]+)\)/g,(n,o)=>`:where(${e}:is(${o.trim()}))`),t=t.replace(/:host\b/g,`:where(${e})`),t=t.replace(/:host-context\(([^)]+)\)/g,(n,o)=>`:where(:where(${o.trim()}) ${e})`),t=t.replace(/::slotted\(([^)]+)\)/g,(n,o)=>`:where(${e} ${o.trim()})`),t=t.replace(/(^|})(\s*)([^@}{]+){/g,(n,o,r,i)=>{const s=be(i,e,!0);return`${o}${r}${s}{`}),t):""}function xe(t){return t.shadowScopeSeq=(t.shadowScopeSeq||0)+1,`s${t.shadowScopeSeq}`}function ve(t){let e="";try{t.querySelectorAll("style").forEach(o=>{e+=(o.textContent||"")+`
`});const n=t.adoptedStyleSheets||[];for(const o of n)try{if(o&&o.cssRules)for(const r of o.cssRules)e+=r.cssText+`
`}catch{}}catch{}return e}function Ce(t,e,n){if(!e)return;const o=document.createElement("style");o.setAttribute("data-sd",n),o.textContent=e,t.insertBefore(o,t.firstChild||null)}function Ee(t,e){try{const n=t.currentSrc||t.src||"";if(!n)return;e.setAttribute("src",n),e.removeAttribute("srcset"),e.removeAttribute("sizes"),e.loading="eager",e.decoding="sync"}catch{}}function ke(t){const e=new Set;if(!t)return e;const n=/var\(\s*(--[A-Za-z0-9_-]+)\b/g;let o;for(;o=n.exec(t);)e.add(o[1]);return e}function Ae(t,e){try{let o=getComputedStyle(t).getPropertyValue(e).trim();if(o)return o}catch{}try{let o=getComputedStyle(document.documentElement).getPropertyValue(e).trim();if(o)return o}catch{}return""}function $e(t,e,n){const o=[];for(const r of e){const i=Ae(t,r);i&&o.push(`${r}: ${i};`)}return o.length?`${n}{${o.join("")}}
`:""}function Me(t){t&&(t.nodeType===Node.ELEMENT_NODE&&t.setAttribute("data-sd-slotted",""),t.querySelectorAll&&t.querySelectorAll("*").forEach(e=>e.setAttribute("data-sd-slotted","")))}async function Re(t,e=3){const n=()=>{try{return t.contentDocument||t.contentWindow?.document||null}catch{return null}};let o=n(),r=0;for(;r<e&&(!o||!o.body&&!o.documentElement);)await new Promise(i=>setTimeout(i,0)),o=n(),r++;return o&&(o.body||o.documentElement)?o:null}function Te(t){const e=t.getBoundingClientRect();let n=0,o=0,r=0,i=0;try{const u=getComputedStyle(t);n=parseFloat(u.borderLeftWidth)||0,o=parseFloat(u.borderRightWidth)||0,r=parseFloat(u.borderTopWidth)||0,i=parseFloat(u.borderBottomWidth)||0}catch{}const s=Math.max(0,Math.round(e.width-(n+o))),a=Math.max(0,Math.round(e.height-(r+i)));return{contentWidth:s,contentHeight:a,rect:e}}function Le(t,e,n){const o=t.createElement("style");return o.setAttribute("data-sd-iframe-pin",""),o.textContent=`html, body {margin: 0 !important;padding: 0 !important;width: ${e}px !important;height: ${n}px !important;min-width: ${e}px !important;min-height: ${n}px !important;box-sizing: border-box !important;overflow: hidden !important;background-clip: border-box !important;}`,(t.head||t.documentElement).appendChild(o),()=>{try{o.remove()}catch{}}}async function Ne(t,e,n){const o=await Re(t,3);if(!o)throw new Error("iframe document not accessible/ready");const{contentWidth:r,contentHeight:i,rect:s}=Te(t),a=n?.snap;if(!a||typeof a.toPng!="function")throw new Error("snapdom.toPng not available in iframe or window");const u={...n,scale:1},c=Le(o,r,i);let l;try{l=await a.toPng(o.documentElement,u)}finally{c()}l.style.display="block",l.style.width=`${r}px`,l.style.height=`${i}px`;const m=document.createElement("div");return e.nodeMap.set(m,t),it(t,m,e,n),m.style.overflow="hidden",m.style.display="block",m.style.width||(m.style.width=`${Math.round(s.width)}px`),m.style.height||(m.style.height=`${Math.round(s.height)}px`),m.appendChild(l),m}async function mt(t,e,n){if(!t)throw new Error("Invalid node");const o=new Set;let r=null,i=null;if(t.nodeType===Node.ELEMENT_NODE){const c=(t.localName||t.tagName||"").toLowerCase();if(t.id==="snapdom-sandbox"||t.hasAttribute("data-snapdom-sandbox")||re.has(c))return null}if(t.nodeType===Node.TEXT_NODE||t.nodeType!==Node.ELEMENT_NODE)return t.cloneNode(!0);if(t.getAttribute("data-capture")==="exclude"){const c=document.createElement("div"),l=t.getBoundingClientRect();return c.style.cssText=`display:inline-block;width:${l.width}px;height:${l.height}px;visibility:hidden;`,c}if(n.exclude&&Array.isArray(n.exclude))for(const c of n.exclude)try{if(t.matches?.(c)){const l=document.createElement("div"),m=t.getBoundingClientRect();return l.style.cssText=`display:inline-block;width:${m.width}px;height:${m.height}px;visibility:hidden;`,l}}catch(l){console.warn(`Invalid selector in exclude option: ${c}`,l)}if(typeof n.filter=="function")try{if(!n.filter(t)){const c=document.createElement("div"),l=t.getBoundingClientRect();return c.style.cssText=`display:inline-block;width:${l.width}px;height:${l.height}px;visibility:hidden;`,c}}catch(c){console.warn("Error in filter function:",c)}if(t.tagName==="IFRAME"){let c=!1;try{c=!!(t.contentDocument||t.contentWindow?.document)}catch{c=!1}if(c)try{return await Ne(t,e,n)}catch(l){console.warn("[SnapDOM] iframe rasterization failed, fallback:",l)}if(n.placeholders){const l=document.createElement("div");return l.style.cssText=`width:${t.offsetWidth}px;height:${t.offsetHeight}px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;`,it(t,l,e,n),l}else{const l=t.getBoundingClientRect(),m=document.createElement("div");return m.style.cssText=`display:inline-block;width:${l.width}px;height:${l.height}px;visibility:hidden;`,it(t,m,e,n),m}}if(t.getAttribute("data-capture")==="placeholder"){const c=t.cloneNode(!1);e.nodeMap.set(c,t),it(t,c,e,n);const l=document.createElement("div");return l.textContent=t.getAttribute("data-placeholder-text")||"",l.style.cssText="color:#666;font-size:12px;text-align:center;line-height:1.4;padding:0.5em;box-sizing:border-box;",c.appendChild(l),c}if(t.tagName==="CANVAS"){const c=t.toDataURL(),l=document.createElement("img");return l.src=c,l.width=t.width,l.height=t.height,e.nodeMap.set(l,t),it(t,l,e,n),l}let s;try{if(s=t.cloneNode(!1),e.nodeMap.set(s,t),t.tagName==="IMG"){Ee(t,s);try{const c=t.getBoundingClientRect();let l=Math.round(c.width||0),m=Math.round(c.height||0);if(!l||!m){const k=window.getComputedStyle(t),W=parseFloat(k.width)||0,A=parseFloat(k.height)||0,T=parseInt(t.getAttribute("width")||"",10)||0,C=parseInt(t.getAttribute("height")||"",10)||0,p=t.width||t.naturalWidth||0,y=t.height||t.naturalHeight||0;l=Math.round(l||W||T||p||0),m=Math.round(m||A||C||y||0)}l&&(s.dataset.snapdomWidth=String(l)),m&&(s.dataset.snapdomHeight=String(m))}catch{}}}catch(c){throw console.error("[Snapdom] Failed to clone node:",t,c),c}if(t instanceof HTMLTextAreaElement){const c=t.getBoundingClientRect();s.style.width=`${c.width}px`,s.style.height=`${c.height}px`}if(t instanceof HTMLInputElement&&(s.value=t.value,s.setAttribute("value",t.value),t.checked!==void 0&&(s.checked=t.checked,t.checked&&s.setAttribute("checked",""),t.indeterminate&&(s.indeterminate=t.indeterminate))),t instanceof HTMLSelectElement&&(r=t.value),t instanceof HTMLTextAreaElement&&(i=t.value),it(t,s,e,n),t.shadowRoot){let c=function(y,x){if(y.nodeType===Node.ELEMENT_NODE&&y.tagName==="STYLE")return x(null);mt(y,e,n).then(F=>{x(F||null)}).catch(F=>{x(null)})};try{const y=t.shadowRoot.querySelectorAll("slot");for(const x of y){let F=[];try{F=x.assignedNodes?.({flatten:!0})||x.assignedNodes?.()||[]}catch{F=x.assignedNodes?.()||[]}for(const B of F)o.add(B)}}catch{}const l=xe(e),m=`[data-sd="${l}"]`;try{s.setAttribute("data-sd",l)}catch{}const k=ve(t.shadowRoot),W=Se(k,m),A=ke(k),T=$e(t,A,m);Ce(s,T+W,l);const C=document.createDocumentFragment(),p=await bt(Array.from(t.shadowRoot.childNodes),c,n.fast);C.append(...p.filter(y=>!!y)),s.appendChild(C)}if(t.tagName==="SLOT"){let c=function(A,T){mt(A,e,n).then(C=>{C&&Me(C),T(C||null)}).catch(C=>{T(null)})};const l=t.assignedNodes?.({flatten:!0})||[],m=l.length>0?l:Array.from(t.childNodes),k=document.createDocumentFragment(),W=await bt(Array.from(m),c,n.fast);return k.append(...W.filter(A=>!!A)),k}function a(c,l){if(o.has(c))return l(null);mt(c,e,n).then(m=>{l(m||null)}).catch(m=>{l(null)})}const u=await bt(Array.from(t.childNodes),a,n.fast);if(s.append(...u.filter(c=>!!c)),r!==null&&s instanceof HTMLSelectElement){s.value=r;for(const c of s.options)c.value===r?c.setAttribute("selected",""):c.removeAttribute("selected")}return i!==null&&s instanceof HTMLTextAreaElement&&(s.textContent=i),s}var Pe=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],Et=[];function Fe(t){const e=Array.isArray(t)?t:[t];for(const n of e)n instanceof RegExp?Et.push(n):typeof n=="string"?Et.push(new RegExp(n,"i")):console.warn("[snapdom] Ignored invalid iconFont value:",n)}function et(t){const e=typeof t=="string"?t:"",n=[...Pe,...Et];for(const o of n)if(o instanceof RegExp&&o.test(e))return!0;return!!(/icon/i.test(e)||/glyph/i.test(e)||/symbols/i.test(e)||/feather/i.test(e)||/fontawesome/i.test(e))}async function Ie(t,e,n,o=32,r="#000"){e=e.replace(/^['"]+|['"]+$/g,"");const i=window.devicePixelRatio||1;await document.fonts.ready;const s=document.createElement("span");s.textContent=t,s.style.position="absolute",s.style.visibility="hidden",s.style.fontFamily=`"${e}"`,s.style.fontWeight=n||"normal",s.style.fontSize=`${o}px`,s.style.lineHeight="1",s.style.whiteSpace="nowrap",s.style.padding="0",s.style.margin="0",document.body.appendChild(s);const a=s.getBoundingClientRect(),u=Math.ceil(a.width),c=Math.ceil(a.height);document.body.removeChild(s);const l=document.createElement("canvas");l.width=u*i,l.height=c*i;const m=l.getContext("2d");return m.scale(i,i),m.font=n?`${n} ${o}px "${e}"`:`${o}px "${e}"`,m.textAlign="left",m.textBaseline="top",m.fillStyle=r,m.fillText(t,0,0),{dataUrl:l.toDataURL(),width:u,height:c}}var We=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded"]);function pt(t){if(!t)return"";for(let e of t.split(",")){let n=e.trim().replace(/^['"]+|['"]+$/g,"");if(n&&!We.has(n.toLowerCase()))return n}return""}function gt(t){const e=String(t??"400").trim().toLowerCase();if(e==="normal")return 400;if(e==="bold")return 700;const n=parseInt(e,10);return Number.isFinite(n)?Math.min(900,Math.max(100,n)):400}function kt(t){const e=String(t??"normal").trim().toLowerCase();return e.startsWith("italic")?"italic":e.startsWith("oblique")?"oblique":"normal"}function _e(t){const e=String(t??"100%").match(/(\d+(?:\.\d+)?)\s*%/);return e?Math.max(50,Math.min(200,parseFloat(e[1]))):100}function Oe(t){const e=String(t||"400").trim(),n=e.match(/^(\d{2,3})\s+(\d{2,3})$/);if(n){const r=gt(n[1]),i=gt(n[2]);return{min:Math.min(r,i),max:Math.max(r,i)}}const o=gt(e);return{min:o,max:o}}function Ue(t){const e=String(t||"normal").trim().toLowerCase();return e==="italic"?{kind:"italic"}:e.startsWith("oblique")?{kind:"oblique"}:{kind:"normal"}}function Be(t){const e=String(t||"100%").trim(),n=e.match(/(\d+(?:\.\d+)?)\s*%\s+(\d+(?:\.\d+)?)\s*%/);if(n){const i=parseFloat(n[1]),s=parseFloat(n[2]);return{min:Math.min(i,s),max:Math.max(i,s)}}const o=e.match(/(\d+(?:\.\d+)?)\s*%/),r=o?parseFloat(o[1]):100;return{min:r,max:r}}function De(t,e){if(!t)return!1;try{const n=new URL(t,location.href);if(n.origin===location.origin)return!0;const r=n.host.toLowerCase();if(["fonts.googleapis.com","fonts.gstatic.com","use.typekit.net","p.typekit.net","kit.fontawesome.com","use.fontawesome.com"].some(a=>r.endsWith(a)))return!0;const s=(n.pathname+n.search).toLowerCase();if(/\bfont(s)?\b/.test(s)||/\.woff2?(\b|$)/.test(s))return!0;for(const a of e){const u=a.toLowerCase().replace(/\s+/g,"+"),c=a.toLowerCase().replace(/\s+/g,"-");if(s.includes(u)||s.includes(c))return!0}return!1}catch{return!1}}function qe(t){const e=new Set;for(const n of t||[]){const o=String(n).split("__")[0]?.trim();o&&e.add(o)}return e}async function je({required:t,usedCodepoints:e,exclude:n=void 0,localFonts:o=[],useProxy:r=""}={}){t instanceof Set||(t=new Set),e instanceof Set||(e=new Set);const i=new Map;for(const d of t){const[f,g,S,h]=String(d).split("__");if(!f)continue;const w=i.get(f)||[];w.push({w:parseInt(g,10),s:S,st:parseInt(h,10)}),i.set(f,w)}const s=/@import\s+url\(["']?([^"')]+)["']?\)/g,a=/url\((["']?)([^"')]+)\1\)/g,u=/@font-face[^{}]*\{[^}]*\}/g;function c(d,f,g,S){if(!i.has(d))return!1;const h=i.get(d),w=Oe(g),$=Ue(f),v=Be(S),N=w.min!==w.max,L=w.min,U=M=>$.kind==="normal"&&M==="normal"||$.kind!=="normal"&&(M==="italic"||M==="oblique");let j=!1;for(const M of h){const R=N?M.w>=w.min&&M.w<=w.max:M.w===L,q=U(kt(M.s)),E=M.st>=v.min&&M.st<=v.max;if(R&&q&&E){j=!0;break}}if(j)return!0;if(!N)for(const M of h){const R=U(kt(M.s)),q=M.st>=v.min&&M.st<=v.max;if(Math.abs(L-M.w)<=300&&R&&q)return!0}return!1}function l(d){if(!d)return[];const f=[],g=d.split(",").map(S=>S.trim()).filter(Boolean);for(const S of g){const h=S.match(/^U\+([0-9A-Fa-f?]+)(?:-([0-9A-Fa-f?]+))?$/);if(!h)continue;const w=h[1],$=h[2],v=N=>{if(!N.includes("?"))return parseInt(N,16);const L=parseInt(N.replace(/\?/g,"0"),16),U=parseInt(N.replace(/\?/g,"F"),16);return[L,U]};if($){const N=v(w),L=v($),U=Array.isArray(N)?N[0]:N,j=Array.isArray(L)?L[1]:L;f.push([Math.min(U,j),Math.max(U,j)])}else{const N=v(w);Array.isArray(N)?f.push([N[0],N[1]]):f.push([N,N])}}return f}function m(d,f){if(!f.length||!d||d.size===0)return!0;for(const g of d)for(const[S,h]of f)if(g>=S&&g<=h)return!0;return!1}function k(d,f){const g=[];if(!d)return g;for(const S of d.matchAll(a)){let h=(S[2]||"").trim();if(!(!h||h.startsWith("data:"))){if(!/^https?:/i.test(h))try{h=new URL(h,f||location.href).href}catch{}g.push(h)}}return g}async function W(d,f){let g=d;for(const S of d.matchAll(a)){const h=At(S[0]);if(!h)continue;let w=h;if(!w.startsWith("http")&&!w.startsWith("data:"))try{w=new URL(w,f||location.href).href}catch{}if(!et(w)){if(b.resource?.has(w)){b.font?.add(w),g=g.replace(S[0],`url(${b.resource.get(w)})`);continue}if(!b.font?.has(w))try{const $=await nt(w,{as:"dataURL",useProxy:r,silent:!0});if($.ok&&typeof $.data=="string"){const v=$.data;b.resource?.set(w,v),b.font?.add(w),g=g.replace(S[0],`url(${v})`)}}catch{console.warn("[snapDOM] Failed to fetch font resource:",w)}}}return g}function A(d){if(!d.length)return null;const f=(v,N)=>d.some(([L,U])=>!(U<v||L>N)),g=f(0,255)||f(305,305),S=f(256,591)||f(7680,7935),h=f(880,1023),w=f(1024,1279);return f(7840,7929)||f(258,259)||f(416,417)||f(431,432)?"vietnamese":w?"cyrillic":h?"greek":S?"latin-ext":g?"latin":null}function T(d={}){const f=new Set((d.families||[]).map(h=>String(h).toLowerCase())),g=new Set((d.domains||[]).map(h=>String(h).toLowerCase())),S=new Set((d.subsets||[]).map(h=>String(h).toLowerCase()));return(h,w)=>{if(f.size&&f.has(h.family.toLowerCase()))return!0;if(g.size)for(const $ of h.srcUrls)try{if(g.has(new URL($).host.toLowerCase()))return!0}catch{}if(S.size){const $=A(w);if($&&S.has($))return!0}return!1}}const C=T(n);function p(d){if(!d)return d;const f=/@font-face[^{}]*\{[^}]*\}/gi,g=new Set,S=[];for(const w of d.match(f)||[]){const $=w.match(/font-family:\s*([^;]+);/i)?.[1]||"",v=pt($),N=(w.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),L=(w.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),U=(w.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),j=(w.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),M=(w.match(/src\s*:\s*([^;]+);/i)?.[1]||"").trim(),R=k(M,location.href),q=R.length?R.map(H=>String(H).toLowerCase()).sort().join("|"):M.toLowerCase(),E=[String(v||"").toLowerCase(),N,L,U,j.toLowerCase(),q].join("|");g.has(E)||(g.add(E),S.push(w))}if(S.length===0)return d;let h=0;return d.replace(f,()=>S[h++]||"")}function y(){const d=Array.from(t||[]).sort().join("|"),f=n?JSON.stringify({families:(n.families||[]).map(h=>String(h).toLowerCase()).sort(),domains:(n.domains||[]).map(h=>String(h).toLowerCase()).sort(),subsets:(n.subsets||[]).map(h=>String(h).toLowerCase()).sort()}):"",g=(o||[]).map(h=>`${(h.family||"").toLowerCase()}::${h.weight||"normal"}::${h.style||"normal"}::${h.src||""}`).sort().join("|");return`fonts-embed-css::req=${d}::ex=${f}::lf=${g}::px=${r||""}`}const x=y();if(b.resource?.has(x))return b.resource.get(x);const F=qe(t),B=[];for(const d of document.querySelectorAll("style")){const f=d.textContent||"";for(const g of f.matchAll(s)){const S=g[1];if(!S||et(S))continue;document.querySelector(`link[rel="stylesheet"][href="${S}"]`)||B.push(S)}}B.length&&await Promise.all(B.map(d=>new Promise(f=>{if(document.querySelector(`link[rel="stylesheet"][href="${d}"]`))return f(null);const g=document.createElement("link");g.rel="stylesheet",g.href=d,g.setAttribute("data-snapdom","injected-import"),g.onload=()=>f(g),g.onerror=()=>f(null),document.head.appendChild(g)})));let _="";const D=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(d=>!!d.href);for(const d of D)try{if(et(d.href))continue;let f="",g=!1;try{g=new URL(d.href,location.href).origin===location.origin}catch{}if(!g&&!De(d.href,F))continue;if(g){const h=Array.from(document.styleSheets).find(w=>w.href===d.href);if(h)try{const w=h.cssRules||[];f=Array.from(w).map($=>$.cssText).join("")}catch{}}if(!f&&(f=(await nt(d.href,{as:"text",useProxy:r})).data,et(d.href)))continue;let S="";for(const h of f.match(u)||[]){const w=(h.match(/font-family:\s*([^;]+);/i)?.[1]||"").trim(),$=pt(w);if(!$||et($))continue;const v=(h.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),N=(h.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),L=(h.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),U=(h.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),j=(h.match(/src\s*:\s*([^;]+);/i)?.[1]||"").trim(),M=k(j,d.href);if(!c($,N,v,L))continue;const R=l(U);if(!m(e,R))continue;const q={family:$,weightSpec:v,styleSpec:N,stretchSpec:L,unicodeRange:U,srcRaw:j,srcUrls:M,href:d.href};if(n&&C(q,R))continue;const E=/url\(/i.test(j)?await W(h,d.href):h;S+=E+""}S.trim()&&(_+=S+"")}catch{console.warn("[snapdom] Failed to process stylesheet:",d.href)}for(const d of document.styleSheets)try{if(d.href&&D.some(g=>g.href===d.href))continue;const f=d.cssRules||[];for(const g of f){if(g.type!==CSSRule.FONT_FACE_RULE)continue;const S=(g.style.getPropertyValue("font-family")||"").trim(),h=pt(S);if(!h||et(h))continue;const w=(g.style.getPropertyValue("font-weight")||"400").trim(),$=(g.style.getPropertyValue("font-style")||"normal").trim(),v=(g.style.getPropertyValue("font-stretch")||"100%").trim(),N=(g.style.getPropertyValue("src")||"").trim(),L=(g.style.getPropertyValue("unicode-range")||"").trim(),U=k(N,d.href||location.href);if(!c(h,$,w,v))continue;const j=l(L);if(!m(e,j))continue;const M={family:h,weightSpec:w,styleSpec:$,stretchSpec:v,unicodeRange:L,srcRaw:N,srcUrls:U,href:d.href||location.href};if(!(n&&C(M,j)))if(/url\(/i.test(N)){const R=await W(N,d.href||location.href);_+=`@font-face{font-family:${h};src:${R};font-style:${$};font-weight:${w};font-stretch:${v};${L?`unicode-range:${L};`:""}}`}else _+=`@font-face{font-family:${h};src:${N};font-style:${$};font-weight:${w};font-stretch:${v};${L?`unicode-range:${L};`:""}}`}}catch{}try{for(const d of document.fonts||[]){if(!d||!d.family||d.status!=="loaded"||!d._snapdomSrc)continue;const f=String(d.family).replace(/^['"]+|['"]+$/g,"");if(et(f)||!i.has(f)||n?.families&&n.families.some(S=>String(S).toLowerCase()===f.toLowerCase()))continue;let g=d._snapdomSrc;if(!String(g).startsWith("data:")){if(b.resource?.has(d._snapdomSrc))g=b.resource.get(d._snapdomSrc),b.font?.add(d._snapdomSrc);else if(!b.font?.has(d._snapdomSrc))try{const S=await nt(d._snapdomSrc,{as:"dataURL",useProxy:r,silent:!0});if(S.ok&&typeof S.data=="string")g=S.data,b.resource?.set(d._snapdomSrc,g),b.font?.add(d._snapdomSrc);else continue}catch{console.warn("[snapdom] Failed to fetch dynamic font src:",d._snapdomSrc);continue}}_+=`@font-face{font-family:'${f}';src:url(${g});font-style:${d.style||"normal"};font-weight:${d.weight||"normal"};}`}}catch{}for(const d of o){if(!d||typeof d!="object")continue;const f=String(d.family||"").replace(/^['"]+|['"]+$/g,"");if(!f||et(f)||!i.has(f)||n?.families&&n.families.some(v=>String(v).toLowerCase()===f.toLowerCase()))continue;const g=d.weight!=null?String(d.weight):"normal",S=d.style!=null?String(d.style):"normal",h=d.stretchPct!=null?`${d.stretchPct}%`:"100%",w=String(d.src||"");let $=w;if(!$.startsWith("data:")){if(b.resource?.has(w))$=b.resource.get(w),b.font?.add(w);else if(!b.font?.has(w))try{const v=await nt(w,{as:"dataURL",useProxy:r,silent:!0});if(v.ok&&typeof v.data=="string")$=v.data,b.resource?.set(w,$),b.font?.add(w);else continue}catch{console.warn("[snapdom] Failed to fetch localFonts src:",w);continue}}_+=`@font-face{font-family:'${f}';src:url(${$});font-style:${S};font-weight:${g};font-stretch:${h};}`}return _&&(_=p(_),b.resource?.set(x,_)),_}function He(t){const e=new Set;if(!t)return e;const n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null),o=s=>{const a=pt(s.fontFamily);if(!a)return;const u=(c,l,m)=>`${a}__${gt(c)}__${kt(l)}__${_e(m)}`;e.add(u(s.fontWeight,s.fontStyle,s.fontStretch))};o(getComputedStyle(t));const r=getComputedStyle(t,"::before");r&&r.content&&r.content!=="none"&&o(r);const i=getComputedStyle(t,"::after");for(i&&i.content&&i.content!=="none"&&o(i);n.nextNode();){const s=n.currentNode,a=getComputedStyle(s);o(a);const u=getComputedStyle(s,"::before");u&&u.content&&u.content!=="none"&&o(u);const c=getComputedStyle(s,"::after");c&&c.content&&c.content!=="none"&&o(c)}return e}function ze(t){const e=new Set,n=r=>{if(r)for(const i of r)e.add(i.codePointAt(0))},o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null);for(;o.nextNode();){const r=o.currentNode;if(r.nodeType===Node.TEXT_NODE)n(r.nodeValue||"");else if(r.nodeType===Node.ELEMENT_NODE){const i=r;for(const s of["::before","::after"]){const u=getComputedStyle(i,s)?.getPropertyValue("content");if(!(!u||u==="none"))if(/^"/.test(u)||/^'/.test(u))n(u.slice(1,-1));else{const c=u.match(/\\[0-9A-Fa-f]{1,6}/g);if(c)for(const l of c)try{e.add(parseInt(l.slice(1),16))}catch{}}}}}return e}async function Ve(t,e=2){try{await document.fonts.ready}catch{}const n=Array.from(t||[]).filter(Boolean);if(n.length===0)return;const o=()=>{const r=document.createElement("div");r.style.cssText="position: absolute !important;left: -9999px !important;top: 0 !important;opacity: 0 !important;pointer-events: none !important;contain: layout size style;";for(const i of n){const s=document.createElement("span");s.textContent="AaBbGg1234ÁÉÍÓÚçñ—∞",s.style.fontFamily=`"${i}"`,s.style.fontWeight="700",s.style.fontStyle="italic",s.style.fontSize="32px",s.style.lineHeight="1",s.style.whiteSpace="nowrap",s.style.margin="0",s.style.padding="0",r.appendChild(s)}document.body.appendChild(r),r.offsetWidth,document.body.removeChild(r)};for(let r=0;r<Math.max(1,e);r++)o(),await new Promise(i=>requestAnimationFrame(()=>requestAnimationFrame(i)))}async function jt(t,e,n,o){if(!(t instanceof Element)||!(e instanceof Element))return;for(const s of["::before","::after","::first-letter"])try{const a=Bt(t,s);if(!a||typeof a[Symbol.iterator]!="function"||a.content==="none"&&a.backgroundImage==="none"&&a.backgroundColor==="transparent"&&(a.borderStyle==="none"||parseFloat(a.borderWidth)===0)&&(!a.transform||a.transform==="none")&&a.display==="inline")continue;if(s==="::first-letter"){const M=getComputedStyle(t);if(!(a.color!==M.color||a.fontSize!==M.fontSize||a.fontWeight!==M.fontWeight))continue;const q=Array.from(e.childNodes).find(I=>I.nodeType===Node.TEXT_NODE&&I.textContent?.trim().length>0);if(!q)continue;const E=q.textContent,Y=E.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['’])?)/u)?.[0],K=E.slice(Y?.length||0);if(!Y||/[\uD800-\uDFFF]/.test(Y))continue;const z=document.createElement("span");z.textContent=Y,z.dataset.snapdomPseudo="::first-letter";const Q=Lt(a),st=xt(Q,"span");n.styleMap.set(z,st);const rt=document.createTextNode(K);e.replaceChild(rt,q),e.insertBefore(z,rt);continue}const c=a.content,l=/counter\s*\(|counters\s*\(/.test(c)?"- ":fe(c),m=a.backgroundImage,k=a.backgroundColor,W=a.fontFamily,A=parseInt(a.fontSize)||32,T=parseInt(a.fontWeight)||!1,C=a.color||"#000",p=a.display,y=parseFloat(a.width),x=parseFloat(a.height),F=a.borderStyle,B=parseFloat(a.borderWidth),_=a.transform,D=et(W),d=c!=="none"&&l!=="",f=m&&m!=="none",g=k&&k!=="transparent"&&k!=="rgba(0, 0, 0, 0)",S=p!=="inline"&&(y>0||x>0),h=F&&F!=="none"&&B>0,w=_&&_!=="none";if(!(d||f||g||S||h||w))continue;const v=document.createElement("span");v.dataset.snapdomPseudo=s,v.style.verticalAlign="middle";const N=Lt(a),L=xt(N,"span");if(n.styleMap.set(v,L),D&&l.length===1){const{dataUrl:M,width:R,height:q}=await Ie(l,W,T,A,C),E=document.createElement("img");E.src=M,E.style=`height:${A}px;width:${R/q*A}px;object-fit:contain;`,v.appendChild(E),e.dataset.snapdomHasIcon="true"}else if(l.startsWith("url(")){const M=At(l);if(M?.trim())try{const R=document.createElement("img"),q=await nt(_t(M),{as:"dataURL",useProxy:o.useProxy});R.src=q.data,R.style=`width:${A}px;height:auto;object-fit:contain;`,v.appendChild(R)}catch(R){console.error(`[snapdom] Error in pseudo ${s} for`,t,R)}}else!D&&d&&(v.textContent=l);if(f)try{const M=Dt(m),R=await Promise.all(M.map(Ot));v.style.backgroundImage=R.join(", ")}catch(M){console.warn(`[snapdom] Failed to inline background-image for ${s}`,M)}if(g&&(v.style.backgroundColor=k),!(v.childNodes.length>0||v.textContent?.trim()!==""||f||g||S||h||w))continue;s==="::before"?e.insertBefore(v,e.firstChild):e.appendChild(v)}catch(a){console.warn(`[snapdom] Failed to capture ${s} for`,t,a)}const r=Array.from(t.children),i=Array.from(e.children).filter(s=>!s.dataset.snapdomPseudo);for(let s=0;s<Math.min(r.length,i.length);s++)await jt(r[s],i[s],n,o)}function Xe(t){if(!t)return;const e=new Set;if(t.querySelectorAll("use").forEach(a=>{const u=a.getAttribute("xlink:href")||a.getAttribute("href");u&&u.startsWith("#")&&e.add(u.slice(1))}),!e.size)return;const n=Array.from(document.querySelectorAll("svg > symbol, svg > defs")),o=n.filter(a=>a.tagName.toLowerCase()==="symbol"),r=n.filter(a=>a.tagName.toLowerCase()==="defs");let i=t.querySelector("svg.inline-defs-container");i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.setAttribute("aria-hidden","true"),i.setAttribute("style","position: absolute; width: 0; height: 0; overflow: hidden;"),i.classList.add("inline-defs-container"),t.insertBefore(i,t.firstChild));const s=new Set;t.querySelectorAll("symbol[id], defs > *[id]").forEach(a=>{s.add(a.id)}),e.forEach(a=>{if(s.has(a))return;const u=o.find(c=>c.id===a);if(u){i.appendChild(u.cloneNode(!0)),s.add(a);return}for(const c of r){const l=c.querySelector(`#${CSS.escape(a)}`);if(l){let m=i.querySelector("defs");m||(m=document.createElementNS("http://www.w3.org/2000/svg","defs"),i.appendChild(m)),m.appendChild(l.cloneNode(!0)),s.add(a);break}}})}async function Ge(t,e={}){const n={styleMap:b.session.styleMap,styleCache:b.session.styleCache,nodeMap:b.session.nodeMap};let o,r="",i="";Ye(t);try{Xe(t)}catch(a){console.warn("inlineExternal defs or symbol failed:",a)}try{o=await mt(t,n,e,t)}catch(a){throw console.warn("deepClone failed:",a),a}try{await jt(t,o,n,e)}catch(a){console.warn("inlinePseudoElements failed:",a)}await Qe(o);try{const a=o.querySelectorAll("style[data-sd]");for(const u of a)i+=u.textContent||"",u.remove()}catch{}const s=de(n.styleMap);r=Array.from(s.entries()).map(([a,u])=>`.${u}{${a}}`).join(""),r=i+r;for(const[a,u]of n.styleMap.entries()){if(a.tagName==="STYLE")continue;if(a.getRootNode&&a.getRootNode()instanceof ShadowRoot){a.setAttribute("style",u.replace(/;/g,"; "));continue}const c=s.get(u);c&&a.classList.add(c);const l=a.style?.backgroundImage,m=a.dataset?.snapdomHasIcon;l&&l!=="none"&&(a.style.backgroundImage=l),m&&(a.style.verticalAlign="middle",a.style.display="inline")}for(const[a,u]of n.nodeMap.entries()){const c=u.scrollLeft,l=u.scrollTop;if((c||l)&&a instanceof HTMLElement){a.style.overflow="hidden",a.style.scrollbarWidth="none",a.style.msOverflowStyle="none";const k=document.createElement("div");for(k.style.transform=`translate(${-c}px, ${-l}px)`,k.style.willChange="transform",k.style.display="inline-block",k.style.width="100%";a.firstChild;)k.appendChild(a.firstChild);a.appendChild(k)}}if(t===n.nodeMap.get(o)){const a=n.styleCache.get(t)||window.getComputedStyle(t);n.styleCache.set(t,a);const u=Jt(a.transform);o.style.margin="0",o.style.position="static",o.style.top="auto",o.style.left="auto",o.style.right="auto",o.style.bottom="auto",o.style.zIndex="auto",o.style.float="none",o.style.clear="none",o.style.transform=u||""}for(const[a,u]of n.nodeMap.entries())u.tagName==="PRE"&&(a.style.marginTop="0",a.style.marginBlockStart="0");return{clone:o,classCSS:r,styleCache:n.styleCache}}function Ye(t){const e=getComputedStyle(t),n=e.outlineStyle,o=e.outlineWidth,r=e.borderStyle,i=e.borderWidth,s=n!=="none"&&parseFloat(o)>0,a=r==="none"||parseFloat(i)===0;s&&a&&(t.style.border=`${o} solid transparent`)}var ct=new Map;async function ut(t){if(b.resource?.has(t))return b.resource.get(t);if(ct.has(t))return ct.get(t);const e=(async()=>{const n=await nt(t,{as:"dataURL",silent:!0});if(!n.ok||typeof n.data!="string")throw new Error(`[snapDOM] Failed to read blob URL: ${t}`);return b.resource?.set(t,n.data),n.data})();ct.set(t,e);try{const n=await e;return ct.set(t,n),n}catch(n){throw ct.delete(t),n}}var Ke=/\bblob:[^)"'\s]+/g;async function It(t){if(!t||t.indexOf("blob:")===-1)return t;const e=Array.from(new Set(t.match(Ke)||[]));if(e.length===0)return t;let n=t;for(const o of e)try{const r=await ut(o);n=n.split(o).join(r)}catch{}return n}function ft(t){return typeof t=="string"&&t.startsWith("blob:")}function Je(t){return(t||"").split(",").map(e=>e.trim()).filter(Boolean).map(e=>{const n=e.match(/^(\S+)(\s+.+)?$/);return n?{url:n[1],desc:n[2]||""}:null}).filter(Boolean)}function Ze(t){return t.map(e=>e.desc?`${e.url} ${e.desc.trim()}`:e.url).join(", ")}async function Qe(t){if(!t)return;const e=t.querySelectorAll?t.querySelectorAll("img"):[];for(const s of e)try{const u=s.getAttribute("src")||s.currentSrc||"";if(ft(u)){const l=await ut(u);s.setAttribute("src",l)}const c=s.getAttribute("srcset");if(c&&c.includes("blob:")){const l=Je(c);let m=!1;for(const k of l)if(ft(k.url))try{k.url=await ut(k.url),m=!0}catch{}m&&s.setAttribute("srcset",Ze(l))}}catch{}const n=t.querySelectorAll?t.querySelectorAll("image"):[];for(const s of n)try{const a="http://www.w3.org/1999/xlink",u=s.getAttribute("href")||s.getAttributeNS?.(a,"href");if(ft(u)){const c=await ut(u);s.setAttribute("href",c),s.removeAttributeNS?.(a,"href")}}catch{}const o=t.querySelectorAll?t.querySelectorAll("[style*='blob:']"):[];for(const s of o)try{const a=s.getAttribute("style");if(a&&a.includes("blob:")){const u=await It(a);s.setAttribute("style",u)}}catch{}const r=t.querySelectorAll?t.querySelectorAll("style"):[];for(const s of r)try{const a=s.textContent||"";a.includes("blob:")&&(s.textContent=await It(a))}catch{}const i=["poster"];for(const s of i){const a=t.querySelectorAll?t.querySelectorAll(`[${s}^='blob:']`):[];for(const u of a)try{const c=u.getAttribute(s);ft(c)&&u.setAttribute(s,await ut(c))}catch{}}}async function tn(t,e={}){const n=Array.from(t.querySelectorAll("img")),o=async r=>{if(!r.getAttribute("src")){const l=r.currentSrc||r.src||"";l&&r.setAttribute("src",l)}r.removeAttribute("srcset"),r.removeAttribute("sizes");const i=r.src||"";if(!i)return;const s=await nt(i,{as:"dataURL",useProxy:e.useProxy});if(s.ok&&typeof s.data=="string"&&s.data.startsWith("data:")){r.src=s.data,r.width||(r.width=r.naturalWidth||100),r.height||(r.height=r.naturalHeight||100);return}const{defaultImageUrl:a}=e||{};if(a)try{const l=parseInt(r.dataset?.snapdomWidth||"",10)||0,m=parseInt(r.dataset?.snapdomHeight||"",10)||0,k=parseInt(r.getAttribute("width")||"",10)||0,W=parseInt(r.getAttribute("height")||"",10)||0,A=parseFloat(r.style?.width||"")||0,T=parseFloat(r.style?.height||"")||0,C=l||A||k||r.width||void 0,p=m||T||W||r.height||void 0,y=typeof a=="function"?await a({width:C,height:p,src:i,element:r}):a;if(y){const x=await nt(y,{as:"dataURL",useProxy:e.useProxy});r.src=x.data,!r.width&&C&&(r.width=C),!r.height&&p&&(r.height=p),r.width||(r.width=r.naturalWidth||100),r.height||(r.height=r.naturalHeight||100);return}}catch{}const u=r.width||r.naturalWidth||100,c=r.height||r.naturalHeight||100;if(e.placeholders!==!1){const l=document.createElement("div");l.style.cssText=[`width:${u}px`,`height:${c}px`,"background:#ccc","display:inline-block","text-align:center",`line-height:${c}px`,"color:#666","font-size:12px","overflow:hidden"].join(";"),l.textContent="img",r.replaceWith(l)}else{const l=document.createElement("div");l.style.cssText=`display:inline-block;width:${u}px;height:${c}px;visibility:hidden;`,r.replaceWith(l)}};for(let r=0;r<n.length;r+=4){const i=n.slice(r,r+4).map(o);await Promise.allSettled(i)}}async function en(t,e,n,o={}){const r=[[t,e]],i=["background-image","mask","mask-image","-webkit-mask","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source"],s=["mask-position","mask-size","mask-repeat","-webkit-mask-position","-webkit-mask-size","-webkit-mask-repeat","mask-origin","mask-clip","-webkit-mask-origin","-webkit-mask-clip","-webkit-mask-position-x","-webkit-mask-position-y"],a=["border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;r.length;){const[u,c]=r.shift(),l=n.get(u)||Bt(u);n.has(u)||n.set(u,l);const m=(()=>{const A=l.getPropertyValue("border-image"),T=l.getPropertyValue("border-image-source");return A&&A!=="none"||T&&T!=="none"})();for(const A of i){const T=l.getPropertyValue(A);if(!T||T==="none")continue;const C=Dt(T),p=await Promise.all(C.map(y=>Ot(y,o)));p.some(y=>y&&y!=="none"&&!/^url\(undefined/.test(y))&&c.style.setProperty(A,p.join(", "))}for(const A of s){const T=l.getPropertyValue(A);!T||T==="initial"||c.style.setProperty(A,T)}if(m)for(const A of a){const T=l.getPropertyValue(A);!T||T==="initial"||c.style.setProperty(A,T)}const k=Array.from(u.children),W=Array.from(c.children);for(let A=0;A<Math.min(k.length,W.length);A++)r.push([k[A],W[A]])}}async function nn(t,e){if(!t)throw new Error("Element cannot be null or undefined");Kt(e.cache);const n=e.fast;let o,r,i,s="",a="",u,c;({clone:o,classCSS:r,styleCache:i}=await Ge(t,e)),await new Promise(W=>{at(async()=>{await tn(o,e),W()},{fast:n})}),await new Promise(W=>{at(async()=>{await en(t,o,i,e),W()},{fast:n})}),e.embedFonts&&await new Promise(W=>{at(async()=>{const A=He(t),T=ze(t);if(qt){const C=new Set(Array.from(A).map(p=>String(p).split("__")[0]).filter(Boolean));await Ve(C,5)}s=await je({required:A,usedCodepoints:T,exclude:e.excludeFonts,useProxy:e.useProxy}),W()},{fast:n})});const l=le(o).sort(),m=l.join(",");b.baseStyle.has(m)?a=b.baseStyle.get(m):await new Promise(W=>{at(()=>{a=ue(l),b.baseStyle.set(m,a),W()},{fast:n})}),await new Promise(W=>{at(()=>{const A=on(t);let T=A.width,C=A.height;const p=Number.isFinite(e.width),y=Number.isFinite(e.height),x=e.scale??1,F=typeof x=="number"&&x!==1;if(!F){const E=A.width/A.height;p&&y?(T=e.width,C=e.height):p?(T=e.width,C=T/E):y&&(C=e.height,T=C*E)}T=Math.max(1,Math.ceil(T)),C=Math.max(1,Math.ceil(C));const B=getComputedStyle(t),_=B.transform&&B.transform!=="none"?B.transform:"",D=an(t);let d,f,g,S,h=0,w=0;if(cn(t)){const E=dn({baseTransform:_,rotate:D.rotate||"0deg",scale:D.scale,translate:D.translate}),H=E.e??E.m41??0,Y=E.f??E.m42??0;h=-H,w=-Y;const K=E.is2D?Wt(E):Wt(new DOMMatrix(E.toString())),z=sn(T,C,K);d=Math.max(1,Math.ceil(z.width)),f=Math.max(1,Math.ceil(z.height)),g=-z.minX,S=-z.minY}else{const E=t.getBoundingClientRect(),H=ln(E,{top:0,right:0,bottom:0,left:0});d=Math.max(1,H.width),f=Math.max(1,H.height),g=-(H.x-Math.floor(E.left)),S=-(H.y-Math.floor(E.top))}const $="http://www.w3.org/2000/svg",v=document.createElementNS($,"foreignObject");v.setAttribute("width","100%"),v.setAttribute("height","100%"),v.setAttribute("x",String(g)),v.setAttribute("y",String(S)),v.style.overflow="visible";const N=document.createElement("style");N.textContent=a+s+"svg{overflow:visible;} foreignObject{overflow:visible;}"+r,v.appendChild(N);const L=document.createElement("div");L.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),L.style.width=`${T}px`,L.style.height=`${C}px`,L.style.overflow="visible",L.style.transformOrigin="0 0";const U=[];if((h||w)&&U.push(`translate(${h}px, ${w}px)`),!F&&(p||y)){const E=A.width?T/A.width:1,H=A.height?C/A.height:1;U.push(`scale(${E}, ${H})`)}else F&&U.push(`scale(${x})`);U.length&&(L.style.transform=U.join(" ")),o.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),o.style.transformOrigin="0 0",o.style.position="static",o.style.left="0",o.style.top="0",_&&(o.style.transform=_),o.style.rotate=D.rotate||"0deg",o.style.scale=D.scale||"1",o.style.translate=D.translate||"0 0",L.appendChild(o),v.appendChild(L);const M=new XMLSerializer().serializeToString(v);c=`<svg xmlns="${$}" width="${d}" height="${f}" viewBox="0 0 ${d} ${f}">`+M+"</svg>",u=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(c)}`,W()},{fast:n})});const k=document.getElementById("snapdom-sandbox");return k&&k.style.position==="absolute"&&k.remove(),u}function on(t){const e=getComputedStyle(t),n=i=>parseFloat(i)||0;let o=n(e.width),r=n(e.height);return e.boxSizing==="content-box"&&(o+=n(e.paddingLeft)+n(e.paddingRight)+n(e.borderLeftWidth)+n(e.borderRightWidth),r+=n(e.paddingTop)+n(e.paddingBottom)+n(e.borderTopWidth)+n(e.borderBottomWidth)),{width:o,height:r}}function rn(t){const e=getComputedStyle(t).transform;if(!e||e==="none")return new DOMMatrix;try{return new DOMMatrix(e)}catch{return new WebKitCSSMatrix(e)}}function Wt(t){return new DOMMatrix([t.a,t.b,t.c,t.d,0,0])}function sn(t,e,n){const r=[{x:0,y:0},{x:t,y:0},{x:0,y:e},{x:t,y:e}].map(c=>({x:n.a*c.x+n.c*c.y,y:n.b*c.x+n.d*c.y})),i=Math.min(...r.map(c=>c.x)),s=Math.max(...r.map(c=>c.x)),a=Math.min(...r.map(c=>c.y)),u=Math.max(...r.map(c=>c.y));return{minX:i,minY:a,width:s-i,height:u-a}}function an(t){const e={rotate:"0deg",scale:null,translate:null},n=t.computedStyleMap?.();if(n){const r=n.get("rotate");if(r){const a=r.angle??r;a&&"unit"in a?e.rotate=a.unit==="rad"?a.value*180/Math.PI+"deg":a.value+a.unit:e.rotate=String(r)}const i=n.get("scale");if(i&&i.length){const a=i[0]?.value??1,u=i[1]?.value??a;e.scale=`${a} ${u}`}const s=n.get("translate");if(s&&s.length){const a=s[0]?.value??0,u=s[1]?.value??0,c=s[0]?.unit??"px",l=s[1]?.unit??"px";e.translate=`${a}${c} ${u}${l}`}return e}const o=getComputedStyle(t);return e.rotate=o.rotate&&o.rotate!=="none"?o.rotate:"0deg",e.scale=o.scale&&o.scale!=="none"?o.scale:null,e.translate=o.translate&&o.translate!=="none"?o.translate:null,e}function cn(t){const e=getComputedStyle(t).transform||"none";return!(e==="none"||e==="matrix(1, 0, 0, 1, 0, 0)"||/^matrix\(\s*1\s*,\s*0\s*,\s*0\s*,\s*1\s*,/i.test(e))}function ln(t,e){const n=Math.floor(t.left-e.left),o=Math.floor(t.top-e.top),r=Math.ceil(t.width+e.left+e.right),i=Math.ceil(t.height+e.top+e.bottom);return{x:n,y:o,width:r,height:i}}var St=null;function un(){if(St)return St;const t=document.createElement("div");return t.id="snapdom-measure-slot",t.setAttribute("aria-hidden","true"),Object.assign(t.style,{position:"absolute",left:"-99999px",top:"0px",width:"0px",height:"0px",overflow:"hidden",opacity:"0",pointerEvents:"none",contain:"size layout style"}),document.documentElement.appendChild(t),St=t,t}function dn(t){const e=un(),n=document.createElement("div");n.style.transformOrigin="0 0",t.baseTransform&&(n.style.transform=t.baseTransform),t.rotate&&(n.style.rotate=t.rotate),t.scale&&(n.style.scale=t.scale),t.translate&&(n.style.translate=t.translate),e.appendChild(n);const o=rn(n);return e.removeChild(n),o}function fn(t){if(typeof t=="string"){const e=t.toLowerCase().trim();if(e==="disabled"||e==="full"||e==="auto"||e==="soft")return e}return"soft"}function hn(t={}){const e=t.format??"png",n=fn(t.cache);return{debug:t.debug??!1,fast:t.fast??!0,scale:t.scale??1,exclude:t.exclude??[],filter:t.filter??null,placeholders:t.placeholders!==!1,embedFonts:t.embedFonts??!1,iconFonts:Array.isArray(t.iconFonts)?t.iconFonts:t.iconFonts?[t.iconFonts]:[],localFonts:Array.isArray(t.localFonts)?t.localFonts:[],excludeFonts:t.excludeFonts??void 0,defaultImageUrl:t.defaultImageUrl??void 0,cache:n,useProxy:typeof t.useProxy=="string"?t.useProxy:"",width:t.width??null,height:t.height??null,format:e,type:t.type??"svg",quality:t.quality??.92,dpr:t.dpr??(window.devicePixelRatio||1),backgroundColor:t.backgroundColor??(["jpg","jpeg","webp"].includes(e)?"#ffffff":null),filename:t.filename??"snapDOM"}}async function mn(t,e){const n=new Image;return n.src=t,await n.decode(),e.scale!==1&&(n.style.width=`${n.naturalWidth*e.scale}px`,n.style.height=`${n.naturalHeight*e.scale}px`),n}async function yt(t,e){const{scale:n,dpr:o}=e,r=qt(),i=new Image;i.crossOrigin="anonymous",i.loading="eager",i.decoding="sync",i.src=t;let s=null;r&&(s=document.createElement("div"),s.setAttribute("aria-hidden","true"),s.style.cssText="position:absolute;left:-99999px;top:0;width:0;height:0;overflow:hidden;opacity:0;pointer-events:none;contain:size layout style;",document.body.appendChild(s),s.appendChild(i)),await i.decode(),r&&await new Promise(m=>setTimeout(m,100));const a=i.naturalWidth*n,u=i.naturalHeight*n,c=document.createElement("canvas");c.width=Math.ceil(a*o),c.height=Math.ceil(u*o),c.style.width=`${a}px`,c.style.height=`${u}px`;const l=c.getContext("2d");if(o!==1&&l.scale(o,o),l.drawImage(i,0,0,a,u),s&&s.parentNode)try{s.parentNode.removeChild(s)}catch{}return c}async function Ht(t,e){const n=e.type;if(n==="svg"){const i=decodeURIComponent(t.split(",")[1]);return new Blob([i],{type:"image/svg+xml"})}const o=await yt(t,e),r=e.backgroundColor?$t(o,e.backgroundColor):o;return new Promise(i=>r.toBlob(s=>i(s),`image/${n}`,e.quality))}async function pn(t,e){const n=await yt(t,e),o=e.backgroundColor?$t(n,e.backgroundColor):n,r=new Image;return r.src=o.toDataURL(`image/${e.format}`,e.quality),await r.decode(),r.style.width=`${o.width/e.dpr}px`,r.style.height=`${o.height/e.dpr}px`,r}async function gn(t,e){if(e.format==="svg"){const i=await Ht(t,{...e,type:"svg"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=e.filename,a.click(),URL.revokeObjectURL(s);return}const n=await yt(t,e),o=e.backgroundColor?$t(n,e.backgroundColor):n,r=document.createElement("a");r.href=o.toDataURL(`image/${e.format}`,e.quality),r.download=e.filename,r.click()}var zt=Symbol("snapdom.internal");async function V(t,e){if(!t)throw new Error("Element cannot be null or undefined");const n=hn(e);return n.iconFonts&&n.iconFonts.length>0&&Fe(n.iconFonts),n.snap||(n.snap={toPng:(o,r)=>V.toPng(o,r),toImg:(o,r)=>V.toImg(o,r)}),V.capture(t,n,zt)}V.capture=async(t,e,n)=>{if(n!==zt)throw new Error("[snapdom.capture] is internal. Use snapdom(...) instead.");const o=await nn(t,e),r=s=>({...e,...s||{}}),i=s=>a=>{const u=r({...a||{},format:s}),c=s==="jpeg"||s==="jpg",l=u.backgroundColor==null||u.backgroundColor==="transparent";return c&&l&&(u.backgroundColor="#ffffff"),pn(o,u)};return{url:o,toRaw:()=>o,toImg:s=>mn(o,r(s)),toCanvas:s=>yt(o,r(s)),toBlob:s=>Ht(o,r(s)),toPng:i("png"),toJpg:i("jpeg"),toWebp:i("webp"),download:s=>gn(o,r(s))}};V.toRaw=(t,e)=>V(t,e).then(n=>n.toRaw());V.toImg=(t,e)=>V(t,e).then(n=>n.toImg());V.toCanvas=(t,e)=>V(t,e).then(n=>n.toCanvas());V.toBlob=(t,e)=>V(t,e).then(n=>n.toBlob());V.toPng=(t,e)=>V(t,{...e,format:"png"}).then(n=>n.toPng());V.toJpg=(t,e)=>V(t,{...e,format:"jpeg"}).then(n=>n.toJpg());V.toWebp=(t,e)=>V(t,{...e,format:"webp"}).then(n=>n.toWebp());V.download=(t,e)=>V(t,e).then(n=>n.download());export{wn as l,V as s};
