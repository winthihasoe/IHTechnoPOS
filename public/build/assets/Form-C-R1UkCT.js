import{r as x,j as e,H as E,L as u,a as _}from"./currencyStore-Dk9RVyyc.js";import{A as w}from"./AuthenticatedLayout-CblcNqH9.js";import{S as W}from"./Save-CaF6Qy7H.js";import{A as H}from"./ArrowBackIosNew-DODCClIX.js";import{B as L,H as M}from"./Home-BKek3M8v.js";import{S as y}from"./sweetalert2.esm.all-q958Q1qq.js";import{B as c}from"./Box-j1BTqM2v.js";import{A as R}from"./AppBar-CxLpgr4B.js";import{T as P}from"./Toolbar-f3-_dlD0.js";import{B as b}from"./Button-aMjmD1gp.js";import{G as o}from"./Grid-6qcTmjc4.js";import{C}from"./Card-C4NAxgST.js";import{C as N}from"./CardContent-CCQfyhgH.js";import{T as m}from"./TextField-DpXyhoD7.js";import{M as S}from"./MenuItem-CEIQJ6q4.js";import{F as T}from"./FormControlLabel-eGygXIaI.js";import{C as A}from"./Checkbox-DmEdO0Ay.js";import"./createSvgIcon-B7q9zImx.js";import"./clsx-B-dksMZM.js";import"./memoTheme-BxRvtGIq.js";import"./index-Rj29YxKv.js";import"./Payments-DSgOMdsa.js";import"./Receipt-DnWIM4Bg.js";import"./index-RHigu7j0.js";import"./index-NgBaJJmW.js";import"./infoshop-hkdJrh2a.js";import"./Divider-D4ysiqwk.js";import"./dividerClasses-BJEnnqiu.js";import"./List-OrinuOpJ.js";import"./ListContext-CTnR0k9S.js";import"./ListItemButton-DDnSs3En.js";import"./listItemButtonClasses-DXPtGUcW.js";import"./TransitionGroupContext-yQ7B3b2o.js";import"./useForkRef-DgOCCfFR.js";import"./ButtonBase-CjVOrSoJ.js";import"./useTimeout--F2UA0HV.js";import"./emotion-react.browser.esm-BdOGWTdw.js";import"./listItemIconClasses-vD-ryqxg.js";import"./ListItemText--0XI93dL.js";import"./listItemTextClasses-DNpdtY9T.js";import"./useSlot-PFdYD2CN.js";import"./Typography-DOI0NvTt.js";import"./index-CsFzvdgQ.js";import"./useTheme-CvovRv7W.js";import"./extendSxProp-Co6nc6xJ.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./Collapse-CHgnjEwQ.js";import"./Portal-DeuEDNNi.js";import"./index-DJHI8khq.js";import"./CssBaseline-DBisayGl.js";import"./IconButton-PbvyX_sG.js";import"./useId-9XzpHYrc.js";import"./CircularProgress-B97ut0O7.js";import"./Tooltip-DjVJzg5-.js";import"./index-DM5RHFVd.js";import"./useControlled-DRAJCB75.js";import"./Grow-D31e1sMI.js";import"./Popper-pZx5Iht2.js";import"./ownerDocument-DW-IO8s5.js";import"./useSlotProps-DuznN7Ax.js";import"./Drawer-Dk2A_cxp.js";import"./mergeSlotProps-D_PRovB-.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-HkKU3E4x.js";import"./Modal-D1QunwiJ.js";import"./Paper-Df0ljdBt.js";import"./ListItem-BK8RisGy.js";import"./isMuiElement-HmfyYHhb.js";import"./useThemeProps-Cgy5Iu59.js";import"./getThemeProps-DKKyYQML.js";import"./useFormControl-Cowmrh0y.js";import"./SwitchBase-DLVdjlNh.js";function it({charge:s,chargeTypes:k,rateTypes:B,pageLabel:f}){const n=!!s,[j,g]=x.useState(!1),[r,p]=x.useState({}),[t,I]=x.useState({name:s?.name||"",charge_type:s?.charge_type||"custom",rate_value:s?.rate_value||"",rate_type:s?.rate_type||"fixed",description:s?.description||"",is_active:s?.is_active??!0,is_default:s?.is_default??!1}),i=a=>{const{name:l,value:v,type:d,checked:D}=a.target;I(h=>({...h,[l]:d==="checkbox"?D:v})),r[l]&&p(h=>({...h,[l]:""}))},F=a=>{a.preventDefault(),g(!0),p({});const l=n?`/charges/${s.id}`:"/charges";_[n?"put":"post"](l,t,{onSuccess:()=>{y.fire({title:"Success!",text:n?"Charge updated successfully.":"Charge created successfully.",icon:"success"}).then(()=>{_.get("/charges")})},onError:d=>{p(d),y.fire({title:"Error!",text:"Please check the form for errors.",icon:"error"})},onFinish:()=>{g(!1)}})};return e.jsxs(w,{children:[e.jsx(E,{title:f}),e.jsxs(c,{className:"bg-gray-50 min-h-screen",children:[e.jsx(R,{position:"static",color:"default",elevation:1,children:e.jsxs(P,{children:[e.jsx(u,{href:"/charges",children:e.jsx(b,{startIcon:e.jsx(H,{}),color:"inherit",children:"Back"})}),e.jsx(c,{className:"flex-1"}),e.jsx(b,{variant:"contained",color:"primary",startIcon:e.jsx(W,{}),onClick:F,disabled:j,children:j?"Saving...":"Save"})]})}),e.jsx(c,{className:"p-6 bg-white border-b",children:e.jsxs(L,{children:[e.jsx(u,{href:"/",className:"text-blue-600",children:e.jsx(M,{fontSize:"small"})}),e.jsx(u,{href:"/charges",className:"text-blue-600",children:"Charges"}),e.jsx("span",{className:"text-gray-500",children:f})]})}),e.jsx(c,{className:"p-6",children:e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,md:8,children:e.jsx(C,{children:e.jsxs(N,{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:n?"Edit Charge":"Create New Charge"}),e.jsx(m,{fullWidth:!0,label:"Name",name:"name",value:t.name,onChange:i,error:!!r.name,helperText:r.name,placeholder:"e.g., VAT (5%), Service Tax, Delivery Fee",variant:"outlined"}),e.jsx(m,{fullWidth:!0,select:!0,label:"Charge Type",name:"charge_type",value:t.charge_type,onChange:i,error:!!r.charge_type,helperText:r.charge_type,variant:"outlined",children:k.map(a=>e.jsx(S,{value:a,children:a.replace(/_/g," ").toUpperCase()},a))}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(m,{fullWidth:!0,label:"Rate Value",name:"rate_value",type:"number",inputProps:{step:"0.01",min:"0"},value:t.rate_value,onChange:i,error:!!r.rate_value,helperText:r.rate_value,placeholder:"e.g., 5 or 50",variant:"outlined"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(m,{fullWidth:!0,select:!0,label:"Rate Type",name:"rate_type",value:t.rate_type,onChange:i,error:!!r.rate_type,helperText:r.rate_type,variant:"outlined",children:B.map(a=>e.jsx(S,{value:a,children:a==="percentage"?"Percentage (%)":"Fixed Amount"},a))})})]}),e.jsx(m,{fullWidth:!0,multiline:!0,rows:4,label:"Description",name:"description",value:t.description,onChange:i,error:!!r.description,helperText:r.description,placeholder:"Add description for this charge...",variant:"outlined"}),e.jsx(T,{control:e.jsx(A,{name:"is_active",checked:t.is_active,onChange:i}),label:"Active"}),e.jsx(T,{control:e.jsx(A,{name:"is_default",checked:t.is_default,onChange:i}),label:"Auto-apply to all sales (Default)"})]})})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(C,{children:e.jsxs(N,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Charge Type"}),e.jsx("p",{className:"text-lg font-semibold",children:t.charge_type.replace(/_/g," ").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Rate"}),e.jsxs("p",{className:"text-lg font-semibold",children:[t.rate_value,t.rate_type==="percentage"?"%":""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Status"}),e.jsx("p",{className:`text-lg font-semibold ${t.is_active?"text-green-600":"text-red-600"}`,children:t.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Default"}),e.jsx("p",{className:`text-lg font-semibold ${t.is_default?"text-blue-600":"text-gray-400"}`,children:t.is_default?"Auto-apply":"Manual"})]})]})]})})})]})})]})]})}export{it as default};
