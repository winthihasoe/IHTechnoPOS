import{r as g,j as e,H as A,b as I}from"./currencyStore-Dk9RVyyc.js";import{C as w}from"./CloudUpload-BAJzgGna.js";import{A as N}from"./AuthenticatedLayout-CblcNqH9.js";import{S as W}from"./sweetalert2.esm.all-q958Q1qq.js";import U from"./MiscSetting-jANlyKNx.js";import L from"./ModuleSetting-CgUl6o0M.js";import k from"./Template-DATv9NcI.js";import H from"./MailSetting-C99org0y.js";import V from"./TelegramSetting-QNj-E5oD.js";import q from"./LoyaltyPointsSetting-DPUw7Eil.js";import G from"./CurrencySetting-BF0Yh3Dh.js";import J from"./BarcodeTemplateEditor-CXCeYxct.js";import{B as _}from"./Box-j1BTqM2v.js";import{T as Y,a as x}from"./Tabs-D51qE-ff.js";import{G as n}from"./Grid-6qcTmjc4.js";import{P as y}from"./Paper-Df0ljdBt.js";import{C as F}from"./Card-C4NAxgST.js";import{C as T}from"./CardMedia-lO_mnymB.js";import{C as M}from"./CardActions-BO7B2VgV.js";import{B as f}from"./Button-aMjmD1gp.js";import{s as $}from"./memoTheme-BxRvtGIq.js";import{T as u}from"./TextField-DpXyhoD7.js";import{M as b}from"./MenuItem-CEIQJ6q4.js";import{T as z}from"./Typography-DOI0NvTt.js";import{F as v}from"./FormControlLabel-eGygXIaI.js";import{S as C}from"./Switch-DzXzblLj.js";import"./createSvgIcon-B7q9zImx.js";import"./clsx-B-dksMZM.js";import"./Payments-DSgOMdsa.js";import"./Receipt-DnWIM4Bg.js";import"./index-RHigu7j0.js";import"./index-NgBaJJmW.js";import"./infoshop-hkdJrh2a.js";import"./Toolbar-f3-_dlD0.js";import"./Divider-D4ysiqwk.js";import"./dividerClasses-BJEnnqiu.js";import"./List-OrinuOpJ.js";import"./ListContext-CTnR0k9S.js";import"./ListItemButton-DDnSs3En.js";import"./listItemButtonClasses-DXPtGUcW.js";import"./TransitionGroupContext-yQ7B3b2o.js";import"./useForkRef-DgOCCfFR.js";import"./ButtonBase-CjVOrSoJ.js";import"./useTimeout--F2UA0HV.js";import"./emotion-react.browser.esm-BdOGWTdw.js";import"./listItemIconClasses-vD-ryqxg.js";import"./ListItemText--0XI93dL.js";import"./listItemTextClasses-DNpdtY9T.js";import"./useSlot-PFdYD2CN.js";import"./Collapse-CHgnjEwQ.js";import"./useTheme-CvovRv7W.js";import"./Portal-DeuEDNNi.js";import"./index-DJHI8khq.js";import"./CssBaseline-DBisayGl.js";import"./index-CsFzvdgQ.js";import"./extendSxProp-Co6nc6xJ.js";import"./AppBar-CxLpgr4B.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./IconButton-PbvyX_sG.js";import"./useId-9XzpHYrc.js";import"./CircularProgress-B97ut0O7.js";import"./Tooltip-DjVJzg5-.js";import"./index-DM5RHFVd.js";import"./useControlled-DRAJCB75.js";import"./Grow-D31e1sMI.js";import"./Popper-pZx5Iht2.js";import"./ownerDocument-DW-IO8s5.js";import"./useSlotProps-DuznN7Ax.js";import"./Drawer-Dk2A_cxp.js";import"./mergeSlotProps-D_PRovB-.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-HkKU3E4x.js";import"./Modal-D1QunwiJ.js";import"./ListItem-BK8RisGy.js";import"./isMuiElement-HmfyYHhb.js";import"./index-Rj29YxKv.js";import"./useThemeProps-Cgy5Iu59.js";import"./getThemeProps-DKKyYQML.js";import"./useFormControl-Cowmrh0y.js";import"./CardContent-CCQfyhgH.js";import"./currencyFormatter-Be2b0Ktm.js";import"./numeral-NHlY-3dw.js";import"./JsBarcode-DwekVVut.js";import"./Alert-CsOnCL1T.js";import"./Close-kFSrCAJM.js";import"./Stack-Yyflu524.js";import"./createLucideIcon-BMpC51dL.js";import"./chevron-down-C5MZ1frv.js";import"./Chip-DT462TV2.js";import"./KeyboardArrowRight-C0as7Qna.js";import"./SwitchBase-DLVdjlNh.js";const D=$("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),K=[{label:"Arial",fontFamily:"Arial, sans-serif"},{label:"Helvetica",fontFamily:"Helvetica, sans-serif"},{label:"Times New Roman",fontFamily:"'Times New Roman', serif"},{label:"Georgia",fontFamily:"Georgia, serif"},{label:"Courier New",fontFamily:"'Courier New', monospace"},{label:"Verdana",fontFamily:"Verdana, sans-serif"},{label:"Tahoma",fontFamily:"Tahoma, sans-serif"},{label:"Trebuchet MS",fontFamily:"'Trebuchet MS', sans-serif"},{label:"Comic Sans MS",fontFamily:"'Comic Sans MS', cursive"},{label:"OCR A Extended",fontFamily:"'OCR A Extended', monospace"},{label:"Monaco",fontFamily:"Monaco, monospace"},{label:"Lucida Console",fontFamily:"'Lucida Console', monospace"},{label:"Consolas",fontFamily:"Consolas, monospace"},{label:"Bitstream Vera Sans Mono",fontFamily:"'Bitstream Vera Sans Mono', monospace"},{label:"DejaVu Sans Mono",fontFamily:"'DejaVu Sans Mono', monospace"},{label:"Inconsolata",fontFamily:"'Inconsolata', monospace"},{label:"Source Code Pro",fontFamily:"'Source Code Pro', monospace"},{label:"Fira Code",fontFamily:"'Fira Code', monospace"},{label:"Droid Sans Mono",fontFamily:"'Droid Sans Mono', monospace"},{label:"Ubuntu Mono",fontFamily:"'Ubuntu Mono', monospace"},{label:"PT Mono",fontFamily:"'PT Mono', monospace"},{label:"Noto Mono",fontFamily:"'Noto Mono', monospace"},{label:"Hack",fontFamily:"'Hack', monospace"},{label:"Tisa Mono",fontFamily:"'Tisa Mono', monospace"},{label:"Space Mono",fontFamily:"'Space Mono', monospace"}];function d(a){const{children:t,value:c,index:h,...j}=a;return e.jsx("div",{role:"tabpanel",hidden:c!==h,id:`vertical-tabpanel-${h}`,"aria-labelledby":`vertical-tab-${h}`,...j,children:c===h&&e.jsx(_,{sx:{p:3},children:t})})}function Bo({settings:a}){const[t,c]=g.useState(()=>{let o={currency_symbol:"Rs.",currency_code:"LKR",symbol_position:"before",decimal_separator:".",thousands_separator:",",decimal_places:"2",negative_format:"minus",show_currency_code:"no"};if(a.currency_settings)try{const i=JSON.parse(a.currency_settings);o={...o,...i}}catch(i){console.error("Failed to parse currency settings:",i)}return{shop_logo:a.shop_logo,app_icon:a.app_icon,sale_receipt_note:a.sale_receipt_note,shop_name:a.shop_name,sale_print_padding_right:a.sale_print_padding_right,sale_print_padding_left:a.sale_print_padding_left,sale_print_font:a.sale_print_font,show_receipt_shop_name:a.show_receipt_shop_name??1,show_barcode_store:a.show_barcode_store,show_barcode_product_price:a.show_barcode_product_price,show_barcode_product_name:a.show_barcode_product_name,sale_receipt_second_note:a.sale_receipt_second_note,auto_open_print_dialog:a.auto_open_print_dialog??"0",enable_unit_discount:"yes",enable_flat_item_discount:"no",cart_first_focus:"quantity",...o}}),[h,j]=g.useState(()=>{const o=new Map([["container_height","28mm"],["store_font_size","0.8em"],["price_font_size","0.8em"],["price_margin_top","-3px"],["price_margin_bottom","-5px"],["barcode_margin_top","-10px"],["barcode_height",35],["barcode_font_size",14],["barcode_width",1.5],["barcode_format","CODE128"],["product_name_margin_top","-4px"],["product_name_font_size","0.7em"]]);if(a.barcode_settings)try{const i=JSON.parse(a.barcode_settings);Object.entries(i).forEach(([l,s])=>{o.set(l,s)})}catch(i){console.error("Failed to parse barcode settings:",i)}return o}),E=o=>{const{name:i,value:l}=o.target;j(s=>new Map(s).set(i,l))},O=o=>{const i=o.target.value;c({...t,sale_print_font:i})},r=o=>{const{name:i,value:l,type:s,checked:B}=o.target;c({...t,[i]:s==="checkbox"?B?"on":"off":l})},S=o=>{const i=o.target.files[0],{name:l}=o.target;if(i){const s=new FileReader;s.onloadend=()=>{c({...t,[l]:s.result})},s.readAsDataURL(i)}},p=o=>{o.preventDefault();const i=new FormData(o.currentTarget),l=Object.fromEntries(i.entries());if(l.setting_type==="barcode"){const s=Object.fromEntries(h);l.barcodeSettings=JSON.stringify(s)}I.post("/settings-update",l,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{W.fire({title:"Success!",text:"Successfully saved",icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}).catch(s=>{console.error("Submission failed with errors:",s),console.log(l)})},[m,P]=g.useState("shop"),R=(o,i)=>{P(i)};return e.jsxs(N,{children:[e.jsx(A,{title:"Settings"}),e.jsxs(_,{component:"div",children:[e.jsx(_,{sx:{flexGrow:1,maxWidth:{xs:350,sm:"100%"},bgcolor:"background.paper"},children:e.jsxs(Y,{value:m,onChange:R,variant:"scrollable",scrollButtons:"auto",children:[e.jsx(x,{label:"SHOP",value:"shop"}),e.jsx(x,{label:"RECEIPT",value:"receipt"}),e.jsx(x,{label:"BARCODE",value:"barcode"}),e.jsx(x,{label:"CURRENCY",value:"currency"}),e.jsx(x,{label:"MISC",value:"misc"}),e.jsx(x,{label:"MODULES",value:"modules"}),e.jsx(x,{label:"MAIL",value:"mail"}),e.jsx(x,{label:"TELEGRAM",value:"telegram"})]})}),e.jsx(d,{value:m,index:"shop",children:e.jsxs("form",{encType:"multipart/form-data",onSubmit:p,method:"post",children:[e.jsx("input",{type:"hidden",name:"setting_type",value:"shop_information"}),e.jsx(_,{sx:{justifyContent:"center",alignItems:"center",width:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(n,{container:!0,width:{xs:"100%",sm:"60%"},children:[e.jsx(y,{sx:{padding:{xs:"0.5rem",sm:"1rem"},marginBottom:"1rem",width:"100%"},children:e.jsxs(n,{size:12,container:!0,spacing:2,children:[e.jsx(n,{size:{xs:12,sm:6},children:e.jsxs(F,{children:[e.jsx(T,{sx:{width:"100%",height:200,contain:"content",padding:"8px",backgroundSize:"contain",backgroundOrigin:"content-box"},image:t.shop_logo,title:"shop logo"}),e.jsx(M,{className:"mt-0",children:e.jsxs(f,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(w,{}),fullWidth:!0,children:["Upload shop logo",e.jsx(D,{type:"file",onChange:S,name:"shop_logo"})]})})]})}),e.jsx(n,{size:{xs:12,sm:6},children:e.jsxs(F,{children:[e.jsx(T,{sx:{width:"100%",height:200,contain:"content",padding:"8px",backgroundSize:"contain",backgroundOrigin:"content-box"},image:t.app_icon,title:"app icon"}),e.jsx(M,{className:"mt-0",children:e.jsxs(f,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(w,{}),fullWidth:!0,children:["Upload app icon",e.jsx(D,{type:"file",onChange:S,name:"app_icon"})]})})]})}),e.jsx(n,{size:12,children:e.jsx(u,{fullWidth:!0,variant:"outlined",label:"Shop name",name:"shop_name",multiline:!0,required:!0,sx:{mt:"2rem"},value:t.shop_name,onChange:r})})]})}),e.jsx(n,{size:12,justifyContent:"end",sx:{display:"flex"},children:e.jsx(f,{type:"submit",variant:"outlined",size:"large",color:"success",fullWidth:!0,children:"UPDATE"})})]})})]})}),e.jsx(d,{value:m,index:"receipt",children:e.jsxs("form",{encType:"multipart/form-data",onSubmit:p,method:"post",children:[e.jsx("input",{type:"hidden",name:"setting_type",value:"receipt"}),e.jsx(_,{sx:{justifyContent:"center",alignItems:"center",width:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(n,{container:!0,spacing:2,width:{xs:"100%",sm:"60%"},children:[e.jsx(y,{elevation:3,sx:{padding:3,marginBottom:2},children:e.jsxs(n,{container:!0,sx:{display:"flex",width:"100%"},spacing:2,children:[e.jsx(n,{size:12,children:e.jsx(u,{fullWidth:!0,variant:"outlined",label:"Receipt note",name:"sale_receipt_note",multiline:!0,required:!0,value:t.sale_receipt_note,onChange:r})}),e.jsx(n,{size:12,children:e.jsx(u,{fullWidth:!0,variant:"outlined",label:"Second note",name:"sale_receipt_second_note",multiline:!0,value:t.sale_receipt_second_note,onChange:r})}),e.jsx(n,{size:12,children:e.jsxs(u,{fullWidth:!0,variant:"outlined",label:"Show shopname",name:"show_receipt_shop_name",multiline:!0,required:!0,value:t.show_receipt_shop_name,onChange:r,select:!0,children:[e.jsx(b,{value:1,children:"Show"}),e.jsx(b,{value:0,children:"Hide"})]})}),e.jsx(n,{size:{xs:6,sm:3},children:e.jsx(u,{fullWidth:!0,variant:"outlined",label:"Padding Right",name:"sale_print_padding_right",multiline:!0,required:!0,value:t.sale_print_padding_right,onChange:r})}),e.jsx(n,{size:{xs:6,sm:3},children:e.jsx(u,{fullWidth:!0,variant:"outlined",label:"Padding Left",name:"sale_print_padding_left",multiline:!0,required:!0,value:t.sale_print_padding_left,onChange:r})}),e.jsx(n,{size:{xs:12,sm:6},children:e.jsx(u,{fullWidth:!0,name:"sale_print_font",label:"Choose Font for Receipt",value:t.sale_print_font,onChange:O,select:!0,children:K.map(o=>e.jsx(b,{value:o.fontFamily,children:e.jsx(z,{style:{fontFamily:o.fontFamily},children:o.label})},o.fontFamily))})}),e.jsx(n,{size:12,children:e.jsxs(u,{fullWidth:!0,variant:"outlined",label:"Auto Open Print Dialog",name:"auto_open_print_dialog",required:!0,value:t.auto_open_print_dialog,onChange:r,select:!0,children:[e.jsx(b,{value:"1",children:"Yes"}),e.jsx(b,{value:"0",children:"No"})]})})]})}),e.jsx(n,{size:12,justifyContent:"end",sx:{display:"flex"},children:e.jsx(f,{type:"submit",variant:"outlined",size:"large",color:"success",fullWidth:!0,children:"UPDATE"})})]})})]})}),e.jsx(d,{value:m,index:"barcode",children:e.jsx(_,{sx:{justifyContent:"center",alignItems:"center",width:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(n,{container:!0,width:{xs:"100%",sm:"60%"},children:[e.jsxs("form",{encType:"multipart/form-data",onSubmit:p,method:"post",style:{marginBottom:"2rem",width:"100%"},children:[e.jsx("input",{type:"hidden",name:"setting_type",value:"barcode"}),e.jsxs(y,{elevation:3,sx:{padding:2,marginBottom:2},children:[e.jsx(z,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Barcode Display Options"}),e.jsxs(n,{container:!0,spacing:2,sx:{display:"flex",width:"100%"},children:[e.jsx(n,{size:{xs:12,sm:6},children:e.jsx(v,{control:e.jsx(C,{name:"show_barcode_store",value:t.show_barcode_store,onChange:r,checked:t.show_barcode_store==="on"}),label:"STORE NAME"})}),e.jsx(n,{size:{xs:12,sm:6},children:e.jsx(v,{control:e.jsx(C,{name:"show_barcode_product_price",value:t.show_barcode_product_price,onChange:r,checked:t.show_barcode_product_price==="on"}),label:"PRODUCT PRICE"})}),e.jsx(n,{size:{xs:12,sm:6},children:e.jsx(v,{control:e.jsx(C,{name:"show_barcode_product_name",value:t.show_barcode_product_name,onChange:r,checked:t.show_barcode_product_name==="on"}),label:"PRODUCT NAME"})})]}),e.jsx(n,{spacing:2,container:!0,sx:{mt:2},children:[...h.keys()].map(o=>e.jsx(n,{size:{xs:12,sm:6,md:3},children:e.jsx(u,{fullWidth:!0,variant:"outlined",label:o.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase()),name:o,value:h.get(o),onChange:E,size:"small"})},o))}),e.jsx(_,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:e.jsx(f,{type:"submit",variant:"outlined",size:"large",color:"success",children:"UPDATE OPTIONS"})})]})]}),e.jsx(_,{sx:{width:"100%"},children:e.jsx(J,{settings:a})})]})})}),e.jsx(d,{value:m,index:"currency",children:e.jsx(G,{handleSubmit:p,settingFormData:t,handleChange:r})}),e.jsx(d,{value:m,index:"misc",children:e.jsx(U,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})}),e.jsx(d,{value:m,index:"modules",children:e.jsx(L,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})}),e.jsx(d,{value:m,index:"template",children:e.jsx(k,{})}),e.jsx(d,{value:m,index:"mail",children:e.jsx(H,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})}),e.jsx(d,{value:m,index:"telegram",children:e.jsx(V,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})}),e.jsx(d,{value:m,index:"loyalty",children:e.jsx(q,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})})]})]})}export{Bo as default};
